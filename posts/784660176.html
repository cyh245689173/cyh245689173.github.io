<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="ä¸¸äº†é¸­"><meta name="copyright" content="ä¸¸äº†é¸­"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>Mybatiså­¦ä¹  | ä¸¸äº†é¸­çš„åšå®¢</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://fastly.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://fastly.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><link rel="icon" type="image/png" href="/images/32x32.ico"><link rel="mask-icon" href="/images/32x32.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"www.kdy.icu","root":"/","title":"ä¸¸äº†é¸­çš„åšå®¢","version":"1.10.4","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æƒ³è¦æœäº›ä»€ä¹ˆï¼Ÿ","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"localsearch":{"enable":"auto","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":["32, 242, 242"]},"vendors":{"darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="ä¸¸äº†é¸­çš„åšå®¢" type="application/atom+xml"><meta name="description" content="ä¸€ã€æ¡†æ¶1.1 æ¡†æ¶æ¦‚å¿µ æ¡†æ¶å°±æ˜¯è½¯ä»¶çš„åŠæˆå“ï¼Œæ¡†æ¶å®Œæˆäº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„é€šç”¨æ“ä½œï¼Œç¨‹åºçŒ¿åªéœ€è¦å¾ˆå°‘æˆ–è€…ä¸ç”¨åŠ å·¥å°±èƒ½å¤Ÿå®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘ä¸­çš„æ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚  1.2 å¸¸ç”¨æ¡†æ¶ MVCæ¡†æ¶ï¼šç®€åŒ–äº†Servletçš„å¼€å‘æ­¥éª¤ï¼Œè´Ÿè´£å’Œå‰ç«¯è¿›è¡Œäº¤äº’ Struts2 SpringMVC   æŒä¹…å±‚æ¡†æ¶ï¼šå®Œæˆæ•°æ®åº“æ“ä½œçš„æ¡†æ¶ï¼Œè´Ÿè´£å’Œæ•°æ®åº“äº¤äº’ MyBatis		 Hibernate">
<meta property="og:type" content="article">
<meta property="og:title" content="Mybatiså­¦ä¹ ">
<meta property="og:url" content="https://www.kdy.icu/posts/784660176.html">
<meta property="og:site_name" content="ä¸¸äº†é¸­çš„åšå®¢">
<meta property="og:description" content="ä¸€ã€æ¡†æ¶1.1 æ¡†æ¶æ¦‚å¿µ æ¡†æ¶å°±æ˜¯è½¯ä»¶çš„åŠæˆå“ï¼Œæ¡†æ¶å®Œæˆäº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„é€šç”¨æ“ä½œï¼Œç¨‹åºçŒ¿åªéœ€è¦å¾ˆå°‘æˆ–è€…ä¸ç”¨åŠ å·¥å°±èƒ½å¤Ÿå®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘ä¸­çš„æ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚  1.2 å¸¸ç”¨æ¡†æ¶ MVCæ¡†æ¶ï¼šç®€åŒ–äº†Servletçš„å¼€å‘æ­¥éª¤ï¼Œè´Ÿè´£å’Œå‰ç«¯è¿›è¡Œäº¤äº’ Struts2 SpringMVC   æŒä¹…å±‚æ¡†æ¶ï¼šå®Œæˆæ•°æ®åº“æ“ä½œçš„æ¡†æ¶ï¼Œè´Ÿè´£å’Œæ•°æ®åº“äº¤äº’ MyBatis		 Hibernate">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/7c97aef5f42a46b98d7669fd79f59878.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/1896cbf31e44483ba88578fb613cb5d9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_15,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/13516178f9334cecb72ac926d1fa74f7.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/bdd91bc0e43c4324b36d781297c05f61.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/11a7701928b942ffa73ed37be2d547ab.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/ab5da22c476a49c38e0ac643a5d2ea17.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/a72c9bc7cf9a4b4eb91de66af568b6b4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/07b69d40512a4496a5f380dce2522791.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/9e08d87b4efb4fbab24c55371fc3a7bf.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/f2007e0bcc814a68b143764f769dc007.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/ad90352371e74f8fb45f49504b9d022e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/d38c671da23f46f38afe7c74265ff05e.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/7c0a1891c9c9471b86c1e116bf2364d4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/0daf24adf26346c29690b2b26030aa95.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/62e16f22cecc45098a9573e5e03edae2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/c3e26c2eef3d492a96391fd222e7bbf4.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/e45ac52b03e443458934089273082020.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/e53d08f2e2df46b7a406a364a94d1b40.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/79cb6aeb2f5047e3add0045695069d24.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://img-blog.csdnimg.cn/ad4b42bf78084d4ab3cea0a7ee3a26c0.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/96935c97d06f4faf994ec64d6be8c55a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="https://www.kdy.icu/Mybatis%E5%AD%A6%E4%B9%A0.assets/1616550990633.png">
<meta property="og:image" content="https://www.kdy.icu/Mybatis%E5%AD%A6%E4%B9%A0.assets/1616551159843.png">
<meta property="article:published_time" content="2022-03-23T13:18:45.000Z">
<meta property="article:modified_time" content="2022-08-14T11:40:14.000Z">
<meta property="article:author" content="ä¸¸äº†é¸­">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/7c97aef5f42a46b98d7669fd79f59878.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ä¸¸äº†é¸­"><img width="96" loading="lazy" src="/images/kedaya.jpg" alt="ä¸¸äº†é¸­"><span class="site-author-status" title="å†å°çš„åŠªåŠ›ä¹˜ä»¥365éƒ½å¾ˆæ˜æ˜¾">ğŸ˜</span></a><div class="site-author-name"><a href="/about/">ä¸¸äº†é¸­</a></div><span class="site-name">ä¸¸äº†é¸­çš„åšå®¢</span><sub class="site-subtitle">è®°å½•å­¦ä¹ ç”Ÿæ´»çš„ç‚¹ç‚¹æ»´æ»´</sub><div class="site-description">ä¿¡æ‰‹æ‹ˆæ¥çš„ä»å®¹ï¼Œéƒ½æ˜¯åšç§¯è–„å‘çš„æ²‰æ·€ã€‚</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">160</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">11</span></a></div><a class="site-state-item hty-icon-button" href="https://www.kdy.icu/" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/cyh245689173" title="GayHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=1696797616" title="ç½‘æŠ‘äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/248628386" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><span class="icon iconify" data-icon="ri:bilibili-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220729090533.jpg" title="åŠ æˆ‘å¾®ä¿¡" target="_blank" style="color:#1AAD19"><span class="icon iconify" data-icon="ri:wechat-2-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="è¯„è®ºåŠ å‹é“¾å•Š" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A1%86%E6%9E%B6"><span class="toc-text">ä¸€ã€æ¡†æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E6%A1%86%E6%9E%B6%E6%A6%82%E5%BF%B5"><span class="toc-text">1.1 æ¡†æ¶æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6"><span class="toc-text">1.2 å¸¸ç”¨æ¡†æ¶</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81MyBatis%E7%AE%80%E4%BB%8B"><span class="toc-text">äºŒã€MyBatisç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-MyBatis%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.1 MyBatisä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-MyBatis%E9%83%A8%E7%BD%B2"><span class="toc-text">2.2 MyBatiséƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%88%9B%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.2.1 åˆ›å»ºMavené¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%B7%BB%E5%8A%A0MyBatis%E4%BE%9D%E8%B5%96"><span class="toc-text">2.2.2 åœ¨é¡¹ç›®ä¸­æ·»åŠ MyBatisä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%88%9B%E5%BB%BAMyBatis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">2.2.3 åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-MyBatis%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8"><span class="toc-text">2.3 MyBatisæ¡†æ¶ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-text">2.3.1 åˆ›å»ºæ•°æ®è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-text">2.3.2 åˆ›å»ºå®ä½“ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E5%88%9B%E5%BB%BADAO%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%AE%9A%E4%B9%89%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95"><span class="toc-text">2.3.3 åˆ›å»ºDAOæ¥å£ï¼Œå®šä¹‰æ“ä½œæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-%E5%88%9B%E5%BB%BADAO%E6%8E%A5%E5%8F%A3%E4%B8%8B%E7%9A%84%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-text">2.3.4 åˆ›å»ºDAOæ¥å£ä¸‹çš„æ˜ å°„æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-5-%E5%B0%86%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">2.3.5 å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-text">2.4 å•å…ƒæµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-%E6%B7%BB%E5%8A%A0%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%BE%9D%E8%B5%96"><span class="toc-text">2.4.1 æ·»åŠ å•å…ƒæµ‹è¯•ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-%E5%88%9B%E5%BB%BA%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text">2.4.2 åˆ›å»ºå•å…ƒæµ‹è¯•ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">2.4.3 æµ‹è¯•ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81MyBatis%E7%9A%84CRUD%E6%93%8D%E4%BD%9C"><span class="toc-text">ä¸‰ã€MyBatisçš„CRUDæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C"><span class="toc-text">3.1 æ·»åŠ æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-text">3.2 åˆ é™¤æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">3.3 ä¿®æ”¹æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-text">3.4 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰æ•°æ®æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2%E5%8D%95%E6%9D%A1%E8%AE%B0%E5%BD%95"><span class="toc-text">3.5 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢å•æ¡è®°å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C-%E5%A4%9A%E5%8F%82%E6%95%B0%E6%9F%A5%E8%AF%A2"><span class="toc-text">3.6 æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2%E6%80%BB%E8%AE%B0%E5%BD%95%E6%95%B0"><span class="toc-text">3.7 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C-%E4%B8%BB%E9%94%AE%E5%9B%9E%E5%A1%AB"><span class="toc-text">3.7 æ·»åŠ æ“ä½œ-ä¸»é”®å›å¡«</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%B0%81%E8%A3%85"><span class="toc-text">å››ã€å·¥å…·ç±»å°è£…</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">äº”ã€äº‹åŠ¡ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E6%89%8B%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="toc-text">5.1 æ‰‹åŠ¨æäº¤äº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%89%8B%E5%8A%A8%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">æµ‹è¯•ç±»ä¸­çš„æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="toc-text">5.2 è‡ªåŠ¨æäº¤äº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MyBatisUtil%E4%BC%98%E5%8C%96"><span class="toc-text">MyBatisUtilä¼˜åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C"><span class="toc-text">æµ‹è¯•æ“ä½œ</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81MyBatis%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">äº”ã€MyBatisä¸»é…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-properties%E6%A0%87%E7%AD%BE"><span class="toc-text">5.1 propertiesæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-setting%E6%A0%87%E7%AD%BE"><span class="toc-text">5.2 settingæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-typeAliases%E6%A0%87%E7%AD%BE"><span class="toc-text">8.3 typeAliasesæ ‡ç­¾</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-plugins%E6%A0%87%E7%AD%BE"><span class="toc-text">5.4 pluginsæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-environments%E6%A0%87%E7%AD%BE"><span class="toc-text">5.5 environmentsæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-mappers%E6%A0%87%E7%AD%BE"><span class="toc-text">5.6 mappersæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-text">å…­ã€æ˜ å°„æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-MyBatis-Mapper%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.1 MyBatis Mapperåˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-mapper%E6%A0%B9%E6%A0%87%E7%AD%BE"><span class="toc-text">6.2 mapperæ ¹æ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-insert%E6%A0%87%E7%AD%BE"><span class="toc-text">6.3 insertæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-delete%E6%A0%87%E7%AD%BE"><span class="toc-text">6.4 deleteæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-update%E6%A0%87%E7%AD%BE"><span class="toc-text">6.5 updateæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-select%E6%A0%87%E7%AD%BE"><span class="toc-text">6.6 selectæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7-resultMap%E6%A0%87%E7%AD%BE"><span class="toc-text">6.7 resultMapæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-cache%E6%A0%87%E7%AD%BE"><span class="toc-text">6.8 cacheæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-9-sql%E5%92%8Cinclude"><span class="toc-text">6.9 sqlå’Œinclude</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-text">ä¸ƒã€åˆ†é¡µæ’ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E6%B7%BB%E5%8A%A0%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">7.1 æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E9%85%8D%E7%BD%AE%E6%8F%92%E4%BB%B6"><span class="toc-text">7.2 é…ç½®æ’ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E5%88%86%E9%A1%B5%E5%AE%9E%E4%BE%8B"><span class="toc-text">7.3 åˆ†é¡µå®ä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84"><span class="toc-text">å…«ã€å…³è”æ˜ å°„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-%E5%AE%9E%E4%BD%93%E5%85%B3%E7%B3%BB"><span class="toc-text">8.1  å®ä½“å…³ç³»</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://www.kdy.icu/posts/784660176.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ä¸¸äº†é¸­"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ä¸¸äº†é¸­çš„åšå®¢"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Mybatiså­¦ä¹ </h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <span class="post-meta-icon-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-23 21:18:45" itemprop="dateCreated datePublished" datetime="2022-03-23T21:18:45+08:00">2022-03-23</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <span class="post-meta-icon-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-08-14 19:40:14" itemprop="dateModified" datetime="2022-08-14T19:40:14+08:00">2022-08-14</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="æœ¬æ–‡å­—æ•°">5.9k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="é˜…è¯»æ—¶é•¿">27m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%90%8E%E7%AB%AF/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">åç«¯</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="ä¸€ã€æ¡†æ¶"><a href="#ä¸€ã€æ¡†æ¶" class="headerlink" title="ä¸€ã€æ¡†æ¶"></a>ä¸€ã€æ¡†æ¶</h1><h2 id="1-1-æ¡†æ¶æ¦‚å¿µ"><a href="#1-1-æ¡†æ¶æ¦‚å¿µ" class="headerlink" title="1.1 æ¡†æ¶æ¦‚å¿µ"></a>1.1 æ¡†æ¶æ¦‚å¿µ</h2><blockquote>
<p>æ¡†æ¶å°±æ˜¯è½¯ä»¶çš„åŠæˆå“ï¼Œæ¡†æ¶å®Œæˆäº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„é€šç”¨æ“ä½œï¼Œç¨‹åºçŒ¿åªéœ€è¦å¾ˆå°‘æˆ–è€…ä¸ç”¨åŠ å·¥å°±èƒ½å¤Ÿå®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘ä¸­çš„æ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<h2 id="1-2-å¸¸ç”¨æ¡†æ¶"><a href="#1-2-å¸¸ç”¨æ¡†æ¶" class="headerlink" title="1.2 å¸¸ç”¨æ¡†æ¶"></a>1.2 å¸¸ç”¨æ¡†æ¶</h2><ul>
<li>MVCæ¡†æ¶ï¼šç®€åŒ–äº†Servletçš„å¼€å‘æ­¥éª¤ï¼Œè´Ÿè´£å’Œå‰ç«¯è¿›è¡Œäº¤äº’<ul>
<li>Struts2</li>
<li><strong>SpringMVC</strong></li>
</ul>
</li>
<li>æŒä¹…å±‚æ¡†æ¶ï¼šå®Œæˆæ•°æ®åº“æ“ä½œçš„æ¡†æ¶ï¼Œè´Ÿè´£å’Œæ•°æ®åº“äº¤äº’<ul>
<li><strong>MyBatis</strong>		</li>
<li>Hibernate 	</li>
<li>èƒ¶æ°´æ¡†æ¶ï¼š<strong>Spring</strong></li>
</ul>
</li>
</ul>
<p><strong>SSM</strong>ï¼šSpring + SpringMVC + MyBatis<br><strong>SSH</strong>ï¼šSpring + Struts2 + Hibernate</p>
<h1 id="äºŒã€MyBatisç®€ä»‹"><a href="#äºŒã€MyBatisç®€ä»‹" class="headerlink" title="äºŒã€MyBatisç®€ä»‹"></a>äºŒã€MyBatisç®€ä»‹</h1><h2 id="2-1-MyBatisä»‹ç»"><a href="#2-1-MyBatisä»‹ç»" class="headerlink" title="2.1 MyBatisä»‹ç»"></a>2.1 MyBatisä»‹ç»</h2><blockquote>
<p>MyBatisæ˜¯ä¸€ä¸ª<strong>åŠè‡ªåŠ¨</strong>çš„<strong>ORM</strong>æ¡†æ¶<br>ORMï¼ˆObject Relation Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå°†Javaä¸­çš„ä¸€ä¸ªå¯¹è±¡å’Œæ•°æ®è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ä¸€ä¸€å¯¹åº”ã€‚<br>ORMæ¡†æ¶æä¾›äº†å®ä½“ç±»ä¸æ•°æ®è¡¨çš„æ˜ å°„å…³ç³»ï¼Œé€šè¿‡æ˜ å°„æ–‡ä»¶çš„é…ç½®ï¼Œå®ç°äº†å¯¹è±¡çš„æŒä¹…åŒ–ã€‚</p>
</blockquote>
<p>MyBatisç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ”¯æŒè‡ªå®šä¹‰SQLã€å­˜å‚¨è¿‡ç¨‹</li>
<li>å¯¹åŸæœ‰çš„JDBCè¿›è¡Œäº†å°è£…ï¼Œå‡ ä¹æ¶ˆé™¤äº†æ‰€æœ‰JDBCçš„ä»£ç ï¼Œè®©å¼€å‘äººå‘˜åªéœ€è¦å…³æ³¨SQLè¯­å¥æœ¬èº«</li>
<li>æ”¯æŒXMLå’Œæ³¨è§£é…ç½®çš„æ–¹å¼è‡ªåŠ¨å®ŒæˆORMæ“ä½œï¼Œå®ç°ç»“æœæ˜ å°„</li>
</ul>
<h2 id="2-2-MyBatiséƒ¨ç½²"><a href="#2-2-MyBatiséƒ¨ç½²" class="headerlink" title="2.2 MyBatiséƒ¨ç½²"></a>2.2 MyBatiséƒ¨ç½²</h2><blockquote>
<p>æ¡†æ¶éƒ¨ç½²å°±æ˜¯æŠŠæ¡†æ¶å¼•å…¥åˆ°æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®é‡Œ</p>
</blockquote>
<h3 id="2-2-1-åˆ›å»ºMavené¡¹ç›®"><a href="#2-2-1-åˆ›å»ºMavené¡¹ç›®" class="headerlink" title="2.2.1 åˆ›å»ºMavené¡¹ç›®"></a>2.2.1 åˆ›å»ºMavené¡¹ç›®</h3><ul>
<li>Javaé¡¹ç›®</li>
<li>Webé¡¹ç›®</li>
</ul>
<h3 id="2-2-2-åœ¨é¡¹ç›®ä¸­æ·»åŠ MyBatisä¾èµ–"><a href="#2-2-2-åœ¨é¡¹ç›®ä¸­æ·»åŠ MyBatisä¾èµ–" class="headerlink" title="2.2.2 åœ¨é¡¹ç›®ä¸­æ·»åŠ MyBatisä¾èµ–"></a>2.2.2 åœ¨é¡¹ç›®ä¸­æ·»åŠ MyBatisä¾èµ–</h3><ul>
<li>åœ¨ pom.xml ä¸­æ·»åŠ ä¾èµ–<ul>
<li>mybatis</li>
<li>mysqldriver</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-3-åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶"><a href="#2-2-3-åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶" class="headerlink" title="2.2.3 åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶"></a>2.2.3 åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶</h3><ol>
<li>åœ¨resourcesä¸­åˆ›å»ºåä¸º<strong>mybatis-config.xml</strong>çš„æ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/7c97aef5f42a46b98d7669fd79f59878.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></li>
<li>åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--åœ¨environmentsä¸­é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸€ä¸ªenvironmentsæ ‡ç­¾ä¸­å¯ä»¥å®šä¹‰è€Œå¤šä¸ªenvironmentæ ‡ç­¾ï¼Œ</span></span><br><span class="line"><span class="comment">    æ¯ä¸ªenvironmentæ ‡ç­¾å¯ä»¥å®šä¹‰ä¸€å¥—è¿æ¥é…ç½®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--defaultç”¨æ¥æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªenvironment--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--transactionManageræ ‡ç­¾ç”¨äºé…ç½®æ•°æ®åº“çš„ç®¡ç†æ–¹å¼--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--dataSourceæ ‡ç­¾å°±æ˜¯ç”¨æ¥é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db1?characterEncoding=utf-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="2-3-MyBatisæ¡†æ¶ä½¿ç”¨"><a href="#2-3-MyBatisæ¡†æ¶ä½¿ç”¨" class="headerlink" title="2.3 MyBatisæ¡†æ¶ä½¿ç”¨"></a>2.3 MyBatisæ¡†æ¶ä½¿ç”¨</h2><blockquote>
<p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯çš„æ•°æ®åº“æ“ä½œ</p>
</blockquote>
<h3 id="2-3-1-åˆ›å»ºæ•°æ®è¡¨"><a href="#2-3-1-åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="2.3.1 åˆ›å»ºæ•°æ®è¡¨"></a>2.3.1 åˆ›å»ºæ•°æ®è¡¨</h3><p><strong>tb_students</strong><br>SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb students(</span><br><span class="line"> sid <span class="type">int</span> <span class="keyword">primary</span> key auto increment,</span><br><span class="line"> stu_num <span class="type">char</span>(<span class="number">5</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>, </span><br><span class="line"> stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>, </span><br><span class="line"> stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>, </span><br><span class="line"> stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>
<h3 id="2-3-2-åˆ›å»ºå®ä½“ç±»"><a href="#2-3-2-åˆ›å»ºå®ä½“ç±»" class="headerlink" title="2.3.2 åˆ›å»ºå®ä½“ç±»"></a>2.3.2 åˆ›å»ºå®ä½“ç±»</h3><p><img src="https://img-blog.csdnimg.cn/1896cbf31e44483ba88578fb613cb5d9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_15,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h3 id="2-3-3-åˆ›å»ºDAOæ¥å£ï¼Œå®šä¹‰æ“ä½œæ–¹æ³•"><a href="#2-3-3-åˆ›å»ºDAOæ¥å£ï¼Œå®šä¹‰æ“ä½œæ–¹æ³•" class="headerlink" title="2.3.3 åˆ›å»ºDAOæ¥å£ï¼Œå®šä¹‰æ“ä½œæ–¹æ³•"></a>2.3.3 åˆ›å»ºDAOæ¥å£ï¼Œå®šä¹‰æ“ä½œæ–¹æ³•</h3><p><img src="https://img-blog.csdnimg.cn/13516178f9334cecb72ac926d1fa74f7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h3 id="2-3-4-åˆ›å»ºDAOæ¥å£ä¸‹çš„æ˜ å°„æ–‡ä»¶"><a href="#2-3-4-åˆ›å»ºDAOæ¥å£ä¸‹çš„æ˜ å°„æ–‡ä»¶" class="headerlink" title="2.3.4 åˆ›å»ºDAOæ¥å£ä¸‹çš„æ˜ å°„æ–‡ä»¶"></a>2.3.4 åˆ›å»ºDAOæ¥å£ä¸‹çš„æ˜ å°„æ–‡ä»¶</h3><ul>
<li>åœ¨<code>resources</code>ç›®å½•ä¸‹ï¼Œæ–°å»ºåä¸º<code>mappers</code>æ–‡ä»¶å¤¹</li>
<li>åœ¨<code>mappers</code>ä¸­æ–°å»ºåä¸º<code>StudentMapper.xml</code>çš„æ˜ å°„æ–‡ä»¶ï¼ˆæ ¹æ®æ¨¡æ¿åˆ›å»ºï¼‰</li>
<li>åœ¨æ˜ å°„æ–‡ä»¶ä¸­å¯¹DAOä¸­å®šä¹‰çš„æ–¹æ³•è¿›è¡Œå®ç°ï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mapperæ–‡ä»¶ç›¸å½“äºDAOæ¥å£çš„â€˜å®ç°ç±»â€™ï¼Œnamespaceå±æ€§è¦æŒ‡å®š`å®ç°`DAOæ¥å£çš„å…¨é™å®šå--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.qfedu.dao.StudentDAO&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.qfedu.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        insert into tb_student(stu_num,stu_name,stu_gender,stu_age)</span><br><span class="line">        values(#&#123;stuNum&#125;,#&#123;stuName&#125;,#&#123;stuGender&#125;,#&#123;stuAge&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteStudent&quot;</span>&gt;</span></span><br><span class="line">        delete from tb_students where stu_num = #&#123;stuNum&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-5-å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶"><a href="#2-3-5-å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="2.3.5 å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶"></a>2.3.5 å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶</h3><p><img src="https://img-blog.csdnimg.cn/bdd91bc0e43c4324b36d781297c05f61.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h2 id="2-4-å•å…ƒæµ‹è¯•"><a href="#2-4-å•å…ƒæµ‹è¯•" class="headerlink" title="2.4 å•å…ƒæµ‹è¯•"></a>2.4 å•å…ƒæµ‹è¯•</h2><h3 id="2-4-1-æ·»åŠ å•å…ƒæµ‹è¯•ä¾èµ–"><a href="#2-4-1-æ·»åŠ å•å…ƒæµ‹è¯•ä¾èµ–" class="headerlink" title="2.4.1 æ·»åŠ å•å…ƒæµ‹è¯•ä¾èµ–"></a>2.4.1 æ·»åŠ å•å…ƒæµ‹è¯•ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-2-åˆ›å»ºå•å…ƒæµ‹è¯•ç±»"><a href="#2-4-2-åˆ›å»ºå•å…ƒæµ‹è¯•ç±»" class="headerlink" title="2.4.2 åˆ›å»ºå•å…ƒæµ‹è¯•ç±»"></a>2.4.2 åˆ›å»ºå•å…ƒæµ‹è¯•ç±»</h3><p>è¢«æµ‹è¯•ç±»ååï¼Œalt + insert â€“ é€‰æ‹©Test<br><img src="https://img-blog.csdnimg.cn/11a7701928b942ffa73ed37be2d547ab.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"><br><img src="https://img-blog.csdnimg.cn/ab5da22c476a49c38e0ac643a5d2ea17.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h3 id="2-4-3-æµ‹è¯•ä»£ç "><a href="#2-4-3-æµ‹è¯•ä»£ç " class="headerlink" title="2.4.3 æµ‹è¯•ä»£ç "></a>2.4.3 æµ‹è¯•ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qfedu.pojo.Student;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-03-22 9:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDAOTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@org</span>.junit.Test</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertStudent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆè¿æ¥ä¿¡æ¯ï¼‰</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ä¼šè¯å·¥å‚ï¼Œè¿æ¥éœ€è¦è¿æ¥ä¿¡æ¯</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ä¼šè¯ï¼ˆè¿æ¥ï¼‰</span></span><br><span class="line">            <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">            <span class="comment">//é€šè¿‡ä¼šè¯è·å–DAOå¯¹è±¡</span></span><br><span class="line">            <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">            <span class="comment">//æµ‹è¯•StudentDAOä¸­çš„æ–¹æ³•</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> studentDAO.insertStudent(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">0</span>, <span class="string">&quot;10001&quot;</span>, <span class="string">&quot;é£é£&quot;</span>, <span class="string">&quot;ç”·&quot;</span>, <span class="number">21</span>));</span><br><span class="line">            <span class="comment">//éœ€è¦æ‰‹åŠ¨æäº¤</span></span><br><span class="line">            sqlSession.commit();</span><br><span class="line"></span><br><span class="line">            System.out.println(i);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@org</span>.junit.Test</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteStudent</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€MyBatisçš„CRUDæ“ä½œ"><a href="#ä¸‰ã€MyBatisçš„CRUDæ“ä½œ" class="headerlink" title="ä¸‰ã€MyBatisçš„CRUDæ“ä½œ"></a>ä¸‰ã€MyBatisçš„CRUDæ“ä½œ</h1><blockquote>
<p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯çš„å¢åˆ æŸ¥æ”¹</p>
</blockquote>
<h2 id="3-1-æ·»åŠ æ“ä½œ"><a href="#3-1-æ·»åŠ æ“ä½œ" class="headerlink" title="3.1 æ·»åŠ æ“ä½œ"></a>3.1 æ·»åŠ æ“ä½œ</h2><p>ç•¥</p>
<h2 id="3-2-åˆ é™¤æ“ä½œ"><a href="#3-2-åˆ é™¤æ“ä½œ" class="headerlink" title="3.2 åˆ é™¤æ“ä½œ"></a>3.2 åˆ é™¤æ“ä½œ</h2><blockquote>
<p>æ ¹æ®å­¦å·åˆ é™¤ä¸€æ¡å­¦ç”Ÿä¿¡æ¯</p>
</blockquote>
<ol>
<li><p>åœ¨StudentDAOä¸­å®šä¹‰åˆ é™¤æ–¹æ³•<br><img src="https://img-blog.csdnimg.cn/a72c9bc7cf9a4b4eb91de66af568b6b4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>åœ¨StudentMapper.xmlä¸­å¯¹æ¥å£æ–¹æ³•è¿›è¡Œå®ç°<br><img src="https://img-blog.csdnimg.cn/07b69d40512a4496a5f380dce2522791.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>å•å…ƒæµ‹è¯•ï¼šåœ¨StudentDAOçš„æµ‹è¯•ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.junit.Test</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteStudent</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸èƒ½ä¿è¯æ–‡ä»¶åä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦è¿›è¡Œæ•è·</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="comment">//SqlSessionFactoryBuilder</span></span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//sqlSessionFactoryè¡¨ç¤ºMyBatisçš„ä¼šè¯å·¥å‚</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//sqlSessionè¡¨ç¤ºMyBatisä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ï¼šé€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line">            <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//é€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨getMapperæ–¹æ³•æ¥è·å–DAOå¯¹è±¡</span></span><br><span class="line">            <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">            <span class="comment">//è°ƒç”¨è¢«æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> studentDAO.deleteStudent(<span class="string">&quot;10001&quot;</span>);</span><br><span class="line">            <span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-3-ä¿®æ”¹æ“ä½œ"><a href="#3-3-ä¿®æ”¹æ“ä½œ" class="headerlink" title="3.3 ä¿®æ”¹æ“ä½œ"></a>3.3 ä¿®æ”¹æ“ä½œ</h2><blockquote>
<p>æ ¹æ®å­¦ç”Ÿå­¦å·ï¼Œä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</p>
</blockquote>
<ol>
<li><p>åœ¨StudentDAOå®šä¹‰ä¿®æ”¹æ–¹æ³•<br><img src="https://img-blog.csdnimg.cn/9e08d87b4efb4fbab24c55371fc3a7bf.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>åœ¨StudentMapper.xmlä¸­å¯¹æ¥å£æ–¹æ³•è¿›è¡Œå®ç°<br><img src="https://img-blog.csdnimg.cn/f2007e0bcc814a68b143764f769dc007.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>å•å…ƒæµ‹è¯•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateStudent</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸èƒ½ä¿è¯æ–‡ä»¶åä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦è¿›è¡Œæ•è·</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//SqlSessionFactoryBuilder</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionFactoryè¡¨ç¤ºMyBatisçš„ä¼šè¯å·¥å‚</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionè¡¨ç¤ºMyBatisä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ï¼šé€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨getMapperæ–¹æ³•æ¥è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//è°ƒç”¨è¢«æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> studentDAO.updateStudent(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">0</span>, <span class="string">&quot;10001&quot;</span>, <span class="string">&quot;ä½³ä½³&quot;</span>, <span class="string">&quot;ç”·&quot;</span>, <span class="number">21</span>));</span><br><span class="line">        <span class="comment">//æ–­è¨€</span></span><br><span class="line">        assertEquals(<span class="number">1</span>,i);</span><br><span class="line">        <span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼ŒassertEquals()æ–¹æ³•è¡¨ç¤ºæ–­è¨€ï¼Œå¦‚æœä¸æœŸæœ›å€¼ä¸åŒåˆ™ä¼šå‡ºç°æ–­è¨€å¼‚å¸¸ã€‚<br><img src="https://img-blog.csdnimg.cn/ad90352371e74f8fb45f49504b9d022e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h2 id="3-4-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰æ•°æ®æ“ä½œ"><a href="#3-4-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰æ•°æ®æ“ä½œ" class="headerlink" title="3.4 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰æ•°æ®æ“ä½œ"></a>3.4 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰æ•°æ®æ“ä½œ</h2><ol>
<li><p>åœ¨StudentDAOä¸­å®šä¹‰æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„æ–¹æ³•<br><img src="https://img-blog.csdnimg.cn/d38c671da23f46f38afe7c74265ff05e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>åœ¨StudentMapper.xmlå¯¹æ¥å£æ–¹æ³•è¿›è¡Œå®ç°<br> å®šä¹‰å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»<img src="https://img-blog.csdnimg.cn/7c0a1891c9c9471b86c1e116bf2364d4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"><br> å¼•ç”¨å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»<br> <img src="https://img-blog.csdnimg.cn/0daf24adf26346c29690b2b26030aa95.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>å•å…ƒæµ‹è¯•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testListStudent</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸èƒ½ä¿è¯æ–‡ä»¶åä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦è¿›è¡Œæ•è·</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//SqlSessionFactoryBuilder</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionFactoryè¡¨ç¤ºMyBatisçš„ä¼šè¯å·¥å‚</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionè¡¨ç¤ºMyBatisä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ï¼šé€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨getMapperæ–¹æ³•æ¥è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//è°ƒç”¨è¢«æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">        List&lt;Student&gt; students = studentDAO.listStudent();</span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ–­è¨€</span></span><br><span class="line">        assertNotNull(students);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ“ä½œä¸éœ€è¦æäº¤äº‹åŠ¡ï¼Œå› ä¸ºä¸ä¼šæ›´æ”¹æ•°æ®åº“</span></span><br><span class="line">  </span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-5-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢å•æ¡è®°å½•"><a href="#3-5-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢å•æ¡è®°å½•" class="headerlink" title="3.5 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢å•æ¡è®°å½•"></a>3.5 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢å•æ¡è®°å½•</h2><ol>
<li><p>åœ¨StudentDAOä¸­å®šä¹‰æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„æ–¹æ³•<br><img src="https://img-blog.csdnimg.cn/62e16f22cecc45098a9573e5e03edae2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>åœ¨StudentMapper.xmlå¯¹æ¥å£æ–¹æ³•å®ç°<br><img src="https://img-blog.csdnimg.cn/c3e26c2eef3d492a96391fd222e7bbf4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>å•å…ƒæµ‹è¯•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryStudent</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸èƒ½ä¿è¯æ–‡ä»¶åä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦è¿›è¡Œæ•è·</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//SqlSessionFactoryBuilder</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionFactoryè¡¨ç¤ºMyBatisçš„ä¼šè¯å·¥å‚</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionè¡¨ç¤ºMyBatisä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ï¼šé€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨getMapperæ–¹æ³•æ¥è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//è°ƒç”¨è¢«æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.queryStudent(<span class="string">&quot;10001&quot;</span>);</span><br><span class="line">        System.out.println(student);</span><br><span class="line">        <span class="comment">//æ–­è¨€</span></span><br><span class="line">        assertNotNull(student);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-6-æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢"><a href="#3-6-æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢" class="headerlink" title="3.6 æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢"></a>3.6 æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢</h2><p><strong>åœ¨MyBatisè¿›è¡Œæ“ä½œæ—¶ï¼š</strong></p>
<ol>
<li>å¦‚æœæ“ä½œæ–¹æ³•åªæœ‰ä¸€ä¸ªç®€å•ç±»å‹æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ï¼Œåœ¨Mapperé…ç½®ä¸­å¯ä»¥ç›´æ¥é€šè¿‡#{str}ç›´æ¥è·å–</li>
<li>å¦‚æœæ“ä½œæ–¹æ³•åªæœ‰ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å‚æ•°ï¼Œåœ¨Mapperé…ç½®ä¸­å¯ä»¥ç›´æ¥é€šè¿‡#{attrName}æ¥è·å–å¯¹è±¡çš„æŒ‡å®šå±æ€§å€¼</li>
<li>å¦‚æœæ“ä½œæ–¹æ³•æœ‰ä¸€ä¸ªMapç±»å‹ï¼Œåœ¨Mapperé…ç½®ä¸­å¯ä»¥ç›´æ¥é€šè¿‡#{key}è·å–keyå¯¹åº”çš„value</li>
<li>å¦‚æœæ“ä½œæ–¹æ³•æœ‰å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨<code>@Param</code>æ³¨è§£å£°æ˜å‚æ•°çš„åˆ«å</li>
</ol>
<blockquote>
<p>åˆ†é¡µæŸ¥è¯¢ï¼ˆå‚æ•° startï¼ŒpageSizeï¼‰</p>
</blockquote>
<ol>
<li><p>åœ¨StudentDAOå®šä¹‰åˆ†é¡µæŸ¥è¯¢çš„æ–¹æ³•<br> <img src="https://img-blog.csdnimg.cn/e45ac52b03e443458934089273082020.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>åœ¨StudentMapper.xmlå¯¹æ¥å£æ–¹æ³•è¿›è¡Œå®ç°ï¼Œï¼Œä½¿ç”¨<code>#&#123;åˆ«å&#125;</code>è·å–åˆ°æŒ‡å®šçš„å‚æ•°<br><img src="https://img-blog.csdnimg.cn/e53d08f2e2df46b7a406a364a94d1b40.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>å•å…ƒæµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testListStudentByPage</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸èƒ½ä¿è¯æ–‡ä»¶åä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦è¿›è¡Œæ•è·</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//SqlSessionFactoryBuilder</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionFactoryè¡¨ç¤ºMyBatisçš„ä¼šè¯å·¥å‚</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionè¡¨ç¤ºMyBatisä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ï¼šé€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨getMapperæ–¹æ³•æ¥è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//è°ƒç”¨è¢«æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">        List&lt;Student&gt; students = studentDAO.listStudentByPage(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ–­è¨€</span></span><br><span class="line">        assertNotNull(students);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>æ³¨æ„ï¼š</code>å¦‚æœDAOæ“ä½œæ–¹æ³•æ²¡æœ‰é€šè¿‡<code>@Param</code>æŒ‡å®šå‚æ•°åˆ«åï¼Œåœ¨SQLä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨<code>arg0,arg1,...</code>æˆ–è€…<code>param1,param2,...</code>çš„æ–¹å¼æ¥è·å–å‚æ•°ã€‚</p>
</li>
</ol>
<h2 id="3-7-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°"><a href="#3-7-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°" class="headerlink" title="3.7 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°"></a>3.7 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°</h2><ol>
<li><p>åœ¨StudentDAOä¸­å®šä¹‰æ“ä½œæ–¹æ³•<br> <img src="https://img-blog.csdnimg.cn/79cb6aeb2f5047e3add0045695069d24.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>åœ¨StudentMapper.xmlä¸­å®ç°æ¥å£æ–¹æ³•ï¼Œé€šè¿‡resultTypeæŒ‡å®šå½“å‰æ“ä½œçš„è¿”å›ç±»å‹ä¸ºint<br><img src="https://img-blog.csdnimg.cn/ad4b42bf78084d4ab3cea0a7ee3a26c0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
</li>
<li><p>å•å…ƒæµ‹è¯•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testgetCount</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸èƒ½ä¿è¯æ–‡ä»¶åä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦è¿›è¡Œæ•è·</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//SqlSessionFactoryBuilder</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionFactoryè¡¨ç¤ºMyBatisçš„ä¼šè¯å·¥å‚</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sqlSessionè¡¨ç¤ºMyBatisä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ï¼šé€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨getMapperæ–¹æ³•æ¥è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//è°ƒç”¨è¢«æµ‹è¯•æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> studentDAO.getCount();</span><br><span class="line">        System.out.println(count);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-7-æ·»åŠ æ“ä½œ-ä¸»é”®å›å¡«"><a href="#3-7-æ·»åŠ æ“ä½œ-ä¸»é”®å›å¡«" class="headerlink" title="3.7 æ·»åŠ æ“ä½œ-ä¸»é”®å›å¡«"></a>3.7 æ·»åŠ æ“ä½œ-ä¸»é”®å›å¡«</h2><ul>
<li>åœ¨<code>StudentMapper.xml</code>ä¸­æ·»åŠ æ“ä½œæ ‡ç­¾â€“insert</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--useGeneratedKey è¡¨ç¤ºè®¾ç½®æ·»åŠ æ“ä½œæ˜¯å¦éœ€è¦å›å¡«ç”Ÿæˆçš„ä¸»é”®--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--keyProperty è®¾ç½®å›å¡«çš„ä¸»é”®å¤åˆ¶åˆ°å‚æ•°å¯¹è±¡ä¸­çš„å“ªä¸€ä¸ªå±æ€§--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;stuId&quot;</span>&gt;</span></span><br><span class="line">       insert into tb_students(stu_num,stu_name,stu_gender,stu_age)</span><br><span class="line">       values(#&#123;stuNum&#125;,#&#123;stuName&#125;,#&#123;stuGender&#125;,#&#123;stuAge&#125;)</span><br><span class="line">   <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å››ã€å·¥å…·ç±»å°è£…"><a href="#å››ã€å·¥å…·ç±»å°è£…" class="headerlink" title="å››ã€å·¥å…·ç±»å°è£…"></a>å››ã€å·¥å…·ç±»å°è£…</h1><ul>
<li>MyBatisUtil</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-03-23 8:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//å·¥å…·ç±»çš„ç›®æ ‡æ˜¯å¯¹å¤–æä¾›SQLSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="comment">//å½“æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªThreadLocalå˜é‡åï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œè®¿é—®çš„æ—¶å€™è®¿é—®çš„éƒ½æ˜¯çº¿ç¨‹è‡ªå·±çš„å˜é‡,è¿™æ ·å°±ä¸ä¼šå­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;SqlSession&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;SqlSession&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//åŠ è½½MyBatisé…ç½®æ–‡ä»¶</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="comment">//å·¥å‚æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥åªåŠ è½½ä¸€æ¬¡å°±å¤Ÿäº†</span></span><br><span class="line">            <span class="comment">//ä¸èƒ½æ¯åšä¸€é¡¿çº¢çƒ§è‚‰å°±å¼€ä¸€å®¶é¥­åº—</span></span><br><span class="line">            factory = builder.build(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (sqlSession == <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession = factory.openSession();</span><br><span class="line">            local.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> factory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Object</span>&gt; T <span class="title function_">getMapper</span><span class="params">(Class&lt;T&gt; c)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> getSqlSession();</span><br><span class="line">        <span class="keyword">return</span> sqlSession.getMapper(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="äº”ã€äº‹åŠ¡ç®¡ç†"><a href="#äº”ã€äº‹åŠ¡ç®¡ç†" class="headerlink" title="äº”ã€äº‹åŠ¡ç®¡ç†"></a>äº”ã€äº‹åŠ¡ç®¡ç†</h1><ul>
<li>SqlSessionåŠŸèƒ½ï¼š</li>
</ul>
<blockquote>
<ol>
<li>getMapper(DAO.class):è·å–Mapperï¼ˆDAOå¯¹è±¡çš„å®ä¾‹ï¼‰</li>
<li>äº‹åŠ¡ç®¡ç†</li>
</ol>
</blockquote>
<h2 id="5-1-æ‰‹åŠ¨æäº¤äº‹åŠ¡"><a href="#5-1-æ‰‹åŠ¨æäº¤äº‹åŠ¡" class="headerlink" title="5.1 æ‰‹åŠ¨æäº¤äº‹åŠ¡"></a>5.1 æ‰‹åŠ¨æäº¤äº‹åŠ¡</h2><h4 id="æµ‹è¯•ç±»ä¸­çš„æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†"><a href="#æµ‹è¯•ç±»ä¸­çš„æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†" class="headerlink" title="æµ‹è¯•ç±»ä¸­çš„æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†"></a>æµ‹è¯•ç±»ä¸­çš„æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.junit.Test</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertStudent</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtil.getSqlSession();</span><br><span class="line">    <span class="comment">//1.å½“è·å–SqlSessionå¯¹è±¡æ—¶ï¼Œå°±é»˜è®¤å¼€å¯äº†äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡ä¼šè¯è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//æµ‹è¯•StudentDAOä¸­çš„æ–¹æ³•</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">5</span>, <span class="string">&quot;10009&quot;</span>, <span class="string">&quot;å‘¨æ°ä¼¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>, <span class="number">28</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> studentDAO.insertStudent(student);</span><br><span class="line">        <span class="comment">//2.æ“ä½œæˆåŠŸä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">//3.æ“ä½œå‡ºç°å¼‚å¸¸ï¼Œéœ€è¦å¯¹äº‹åŠ¡è¿›è¡Œrollbackå›æ»šäº‹åŠ¡</span></span><br><span class="line">        sqlSession.rollback();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-2-è‡ªåŠ¨æäº¤äº‹åŠ¡"><a href="#5-2-è‡ªåŠ¨æäº¤äº‹åŠ¡" class="headerlink" title="5.2 è‡ªåŠ¨æäº¤äº‹åŠ¡"></a>5.2 è‡ªåŠ¨æäº¤äº‹åŠ¡</h2><blockquote>
<p>é€šè¿‡SqlSessionFactoryè°ƒç”¨openSessionæ–¹æ³•è·å–SQLSessionå¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¥è®¾ç½®äº‹åŠ¡æ˜¯å¦è‡ªåŠ¨æäº¤ï¼š</p>
<ul>
<li>å¦‚æœå‚æ•°è®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºè‡ªåŠ¨äº‹åŠ¡æäº¤</li>
<li>å¦‚æœä¸è®¾ç½®å‚æ•°æˆ–è€…è®¾ç½®ä¸ºfalseï¼Œè¡¨ç¤ºæ‰‹åŠ¨äº‹åŠ¡æäº¤</li>
</ul>
</blockquote>
<h4 id="MyBatisUtilä¼˜åŒ–"><a href="#MyBatisUtilä¼˜åŒ–" class="headerlink" title="MyBatisUtilä¼˜åŒ–"></a>MyBatisUtilä¼˜åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-03-23 8:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//å·¥å…·ç±»çš„ç›®æ ‡æ˜¯å¯¹å¤–æä¾›SQLSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="comment">//å½“æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªThreadLocalå˜é‡åï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œè®¿é—®çš„æ—¶å€™è®¿é—®çš„éƒ½æ˜¯çº¿ç¨‹è‡ªå·±çš„å˜é‡,è¿™æ ·å°±ä¸ä¼šå­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;SqlSession&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;SqlSession&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//åŠ è½½MyBatisé…ç½®æ–‡ä»¶</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="comment">//å·¥å‚æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥åªåŠ è½½ä¸€æ¬¡å°±å¤Ÿäº†</span></span><br><span class="line">            <span class="comment">//ä¸èƒ½æ¯åšä¸€é¡¿çº¢çƒ§è‚‰å°±å¼€ä¸€å®¶é¥­åº—</span></span><br><span class="line">            factory = builder.build(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªåŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">(<span class="type">boolean</span> isAutoCommit)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (sqlSession == <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession = factory.openSession(isAutoCommit);</span><br><span class="line">            local.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰‹åŠ¨æäº¤äº‹åŠ¡,ä»¥é‡è½½çš„æ–¹å¼å®ç°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªåŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line">    <span class="comment">//ç›´æ¥è·å–DAOå°±æ˜¯ä¸æƒ³è¿›è¡Œæ‰‹åŠ¨äº‹åŠ¡ç®¡ç†ï¼Œæ‰€ä»¥ç›´æ¥è®¾ç½®ä¸ºè‡ªåŠ¨äº‹åŠ¡æäº¤</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Object</span>&gt; T <span class="title function_">getMapper</span><span class="params">(Class&lt;T&gt; c)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> getSqlSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> sqlSession.getMapper(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•æ“ä½œ"><a href="#æµ‹è¯•æ“ä½œ" class="headerlink" title="æµ‹è¯•æ“ä½œ"></a>æµ‹è¯•æ“ä½œ</h4><ol>
<li>æ‰‹åŠ¨äº‹åŠ¡æäº¤<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.junit.Test</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertStudent</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtil.getSqlSession(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//1.å½“è·å–SqlSessionå¯¹è±¡æ—¶ï¼Œå°±é»˜è®¤å¼€å¯äº†äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡ä¼šè¯è·å–DAOå¯¹è±¡</span></span><br><span class="line">        <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">        <span class="comment">//æµ‹è¯•StudentDAOä¸­çš„æ–¹æ³•</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">5</span>, <span class="string">&quot;10009&quot;</span>, <span class="string">&quot;å‘¨æ°ä¼¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>, <span class="number">28</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> studentDAO.insertStudent(student);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ“ä½œ1</span></span><br><span class="line">        <span class="comment">//æ“ä½œ2</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="comment">//æ“ä½œ3</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœéœ€è¦ä½¿ç”¨SqlSessionè¿›è¡Œå¤šæ­¥æ“ä½œï¼Œå»ºè®®ä½¿ç”¨æ‰‹åŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.æ“ä½œæˆåŠŸä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">//3.æ“ä½œå‡ºç°å¼‚å¸¸ï¼Œéœ€è¦å¯¹äº‹åŠ¡è¿›è¡Œrollbackå›æ»šäº‹åŠ¡</span></span><br><span class="line">        sqlSession.rollback();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>è‡ªåŠ¨äº‹åŠ¡æäº¤</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.junit.Test</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteStudent</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> MyBatisUtil.getMapper(StudentDAO.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> studentDAO.deleteStudent(<span class="string">&quot;10001&quot;</span>);</span><br><span class="line">        <span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="äº”ã€MyBatisä¸»é…ç½®æ–‡ä»¶"><a href="#äº”ã€MyBatisä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="äº”ã€MyBatisä¸»é…ç½®æ–‡ä»¶"></a>äº”ã€MyBatisä¸»é…ç½®æ–‡ä»¶</h1><blockquote>
<p>mybatis-config.xmlæ˜¯MyBatisæ¡†æ¶çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œä¸»è¦ç”¨äºé…ç½®MyBatisæ•°æ®æºä»¥åŠå±æ€§ä¿¡æ¯</p>
</blockquote>
<h2 id="5-1-propertiesæ ‡ç­¾"><a href="#5-1-propertiesæ ‡ç­¾" class="headerlink" title="5.1 propertiesæ ‡ç­¾"></a>5.1 propertiesæ ‡ç­¾</h2><blockquote>
<p>ç”¨äºè®¾ç½®é”®å€¼å¯¹ï¼Œæˆ–è€…åŠ è½½å±æ€§æ–‡ä»¶</p>
</blockquote>
<ul>
<li>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºjdbc.propertiesæ–‡ä»¶ï¼Œé…ç½®é”®å€¼å¯¹å¦‚ä¸‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql_driver=com.mysql.jdbc.Driver</span><br><span class="line">mysql_url=jdbc:mysql://localhost:3306/db1?useSSL=true</span><br><span class="line">mysql_username=root</span><br><span class="line">mysql_password=123456</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨mybatis-config.xmlä¸­é€šè¿‡propertiesæ ‡ç­¾å¼•ç”¨jdbc.propertiesæ–‡ä»¶ï¼›</li>
<li>å¼•å…¥æ–‡ä»¶ä¹‹åï¼Œåœ¨é…ç½®environmentæ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨jdbc.propertiesçš„keyæ¥è·å–å¯¹åº”çš„value<br><img src="https://img-blog.csdnimg.cn/96935c97d06f4faf994ec64d6be8c55a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu26JC96ZmI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"><br><code>æ³¨æ„</code>ï¼š${}æ˜¯propertiesæ–‡ä»¶ä¸­çš„å˜é‡å ä½ç¬¦ï¼Œ#{}æ˜¯sqlçš„å‚æ•°å ä½ç¬¦ã€‚</li>
</ul>
<h2 id="5-2-settingæ ‡ç­¾"><a href="#5-2-settingæ ‡ç­¾" class="headerlink" title="5.2 settingæ ‡ç­¾"></a>5.2 settingæ ‡ç­¾</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è®¾ç½®mybatisçš„å±æ€§--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨äºŒçº§ç¼“å­˜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨å»¶è¿ŸåŠ è½½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-3-typeAliasesæ ‡ç­¾"><a href="#8-3-typeAliasesæ ‡ç­¾" class="headerlink" title="8.3 typeAliasesæ ‡ç­¾"></a>8.3 typeAliasesæ ‡ç­¾</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--typeAliasesæ ‡ç­¾ç”¨äºç»™å®ä½“ç±»å–åˆ«åï¼Œåœ¨æ˜ å°„æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«åæ¥æ›¿ä»£å®ä½“ç±»çš„å…¨é™å®šå--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.qfedu.pojo.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Student&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.qfedu.pojo.Book&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-4-pluginsæ ‡ç­¾"><a href="#5-4-pluginsæ ‡ç­¾" class="headerlink" title="5.4 pluginsæ ‡ç­¾"></a>5.4 pluginsæ ‡ç­¾</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pluginsæ ‡ç­¾ï¼Œç”¨äºé…ç½®MyBatisæ’ä»¶ï¼ˆåˆ†é¡µæ’ä»¶ï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-5-environmentsæ ‡ç­¾"><a href="#5-5-environmentsæ ‡ç­¾" class="headerlink" title="5.5 environmentsæ ‡ç­¾"></a>5.5 environmentsæ ‡ç­¾</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨environmentsé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åœ¨environmentsæ ‡ç­¾ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªenvironmentæ ‡ç­¾ï¼Œæ¯ä¸ªenvironmentæ ‡ç­¾å¯ä»¥å®šä¹‰ä¸€å¥—è¿æ¥é…ç½® --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- defaultå±æ€§ï¼Œç”¨æ¥æŒ‡å®šä½¿ç”¨å“ªä¸ªenvironmentæ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  environment æ ‡ç­¾ç”¨äºé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--transactionManageræ ‡ç­¾ç”¨äºé…ç½®æ•°æ®åº“ç®¡ç†æ–¹å¼</span></span><br><span class="line"><span class="comment">            type=&quot;JDBC&quot;  å¯ä»¥è¿›è¡Œäº‹åŠ¡çš„æäº¤å’Œå›æ»šæ“ä½œ</span></span><br><span class="line"><span class="comment">            type=&quot;MANAGED&quot; ä¾èµ–å®¹å™¨å®Œæˆäº‹åŠ¡ç®¡ç†ï¼Œæœ¬èº«ä¸è¿›è¡Œäº‹åŠ¡çš„æäº¤å’Œå›æ»šæ“ä½œ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--dataSourceæ ‡ç­¾å°±æ˜¯ç”¨æ¥é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ POOLED|UNPOOLED --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql_driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql_url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql_username&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql_password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-6-mappersæ ‡ç­¾"><a href="#5-6-mappersæ ‡ç­¾" class="headerlink" title="5.6 mappersæ ‡ç­¾"></a>5.6 mappersæ ‡ç­¾</h2><blockquote>
<p>åŠ è½½æ˜ å°„é…ç½®ï¼ˆæ˜ å°„æ–‡ä»¶ã€DAOæ³¨è§£ï¼‰</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mappersæ ‡ç­¾ç”¨äºè½½å…¥æ˜ å°„æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mappers/StudentMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€æ˜ å°„æ–‡ä»¶"><a href="#å…­ã€æ˜ å°„æ–‡ä»¶" class="headerlink" title="å…­ã€æ˜ å°„æ–‡ä»¶"></a>å…­ã€æ˜ å°„æ–‡ä»¶</h2><h2 id="6-1-MyBatis-Mapperåˆå§‹åŒ–"><a href="#6-1-MyBatis-Mapperåˆå§‹åŒ–" class="headerlink" title="6.1 MyBatis Mapperåˆå§‹åŒ–"></a>6.1 MyBatis Mapperåˆå§‹åŒ–</h2><blockquote>
<p>XMLæ–‡ä»¶è§£æï¼šè¯»å–xmlæ–‡ä»¶ä¸­çš„æ ‡ç­¾é…ç½®å°è£…åˆ°Javaå¯¹è±¡ä¸­</p>
</blockquote>
<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-n7eXPOJ3-1648176376717)(imgs&#x2F;1616487875112.png)]</p>
<h2 id="6-2-mapperæ ¹æ ‡ç­¾"><a href="#6-2-mapperæ ¹æ ‡ç­¾" class="headerlink" title="6.2 mapperæ ¹æ ‡ç­¾"></a>6.2 mapperæ ¹æ ‡ç­¾</h2><blockquote>
<p>mapperæ–‡ä»¶ç›¸å½“äºDAOæ¥å£çš„â€˜å®ç°ç±»â€™ï¼Œnamespaceå±æ€§è¦æŒ‡å®š<code>å®ç°</code>DAOæ¥å£çš„å…¨é™å®šå</p>
</blockquote>
<h2 id="6-3-insertæ ‡ç­¾"><a href="#6-3-insertæ ‡ç­¾" class="headerlink" title="6.3 insertæ ‡ç­¾"></a>6.3 insertæ ‡ç­¾</h2><blockquote>
<p>å£°æ˜æ·»åŠ æ“ä½œï¼ˆsql: insert â€¦ï¼‰</p>
<p><strong>å¸¸ç”¨å±æ€§</strong></p>
<p>idå±æ€§ï¼Œç»‘å®šå¯¹åº”DAOæ¥å£ä¸­çš„æ–¹æ³•</p>
<p>parameterTypeå±æ€§ï¼Œç”¨ä»¥æŒ‡å®šæ¥å£ä¸­å¯¹åº”æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼ˆå¯çœç•¥ï¼‰</p>
<p>useGeneratedKeyså±æ€§ï¼Œ è®¾ç½®æ·»åŠ æ“ä½œæ˜¯å¦éœ€è¦å›å¡«ç”Ÿæˆçš„ä¸»é”®</p>
<p>keyPropertyå±æ€§ï¼ŒæŒ‡å®šå›å¡«çš„idè®¾ç½®åˆ°å‚æ•°å¯¹è±¡ä¸­çš„å“ªä¸ªå±æ€§</p>
<p>timeoutå±æ€§ï¼Œè®¾ç½®æ­¤æ“ä½œçš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœä¸è®¾ç½®åˆ™ä¸€ç›´ç­‰å¾…</p>
</blockquote>
<p><strong>ä¸»é”®å›å¡«</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;stuId&quot;</span>&gt;</span></span><br><span class="line">    insert into tb_students(stu_num, stu_name, stu_gender, stu_age)</span><br><span class="line">    values (#&#123;stuNum&#125;, #&#123;stuName&#125;, #&#123;stuGender&#125;, #&#123;stuAge&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;stuId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">        select last_insert_id()</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    insert into tb_students(stu_num, stu_name, stu_gender, stu_age)</span><br><span class="line">    values (#&#123;stuNum&#125;, #&#123;stuName&#125;, #&#123;stuGender&#125;, #&#123;stuAge&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-4-deleteæ ‡ç­¾"><a href="#6-4-deleteæ ‡ç­¾" class="headerlink" title="6.4 deleteæ ‡ç­¾"></a>6.4 deleteæ ‡ç­¾</h2><blockquote>
<p>å£°æ˜åˆ é™¤æ“ä½œ</p>
</blockquote>
<h2 id="6-5-updateæ ‡ç­¾"><a href="#6-5-updateæ ‡ç­¾" class="headerlink" title="6.5 updateæ ‡ç­¾"></a>6.5 updateæ ‡ç­¾</h2><blockquote>
<p>å£°æ˜ä¿®æ”¹æ“ä½œ</p>
</blockquote>
<h2 id="6-6-selectæ ‡ç­¾"><a href="#6-6-selectæ ‡ç­¾" class="headerlink" title="6.6 selectæ ‡ç­¾"></a>6.6 selectæ ‡ç­¾</h2><blockquote>
<p>å£°æ˜æŸ¥è¯¢æ“ä½œ</p>
<ul>
<li><p>idå±æ€§ï¼Œ æŒ‡å®šç»‘å®šæ–¹æ³•çš„æ–¹æ³•å</p>
</li>
<li><p>parameterTypeå±æ€§ï¼Œè®¾ç½®å‚æ•°ç±»å‹</p>
</li>
<li><p>resultTypeå±æ€§ï¼ŒæŒ‡å®šå½“å‰sqlè¿”å›æ•°æ®å°è£…çš„å¯¹è±¡ç±»å‹ï¼ˆå®ä½“ç±»ï¼‰</p>
</li>
<li><p>resultMapå±æ€§ï¼ŒæŒ‡å®šä»æ•°æ®è¡¨åˆ°å®ä½“ç±»çš„å­—æ®µå’Œå±æ€§çš„å¯¹åº”å…³ç³»</p>
</li>
<li><p>useCacheå±æ€§ï¼ŒæŒ‡å®šæ­¤æŸ¥è¯¢æ“ä½œæ˜¯å¦éœ€è¦ç¼“å­˜</p>
</li>
<li><p>timeoutå±æ€§ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´</p>
</li>
</ul>
</blockquote>
<h2 id="6-7-resultMapæ ‡ç­¾"><a href="#6-7-resultMapæ ‡ç­¾" class="headerlink" title="6.7 resultMapæ ‡ç­¾"></a>6.7 resultMapæ ‡ç­¾</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- resultMapæ ‡ç­¾ç”¨äºå®šä¹‰å®ä½“ç±»ä¸æ•°æ®è¡¨çš„æ˜ å°„å…³ç³»ï¼ˆORMï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stuId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;stu_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stuNum&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;stu_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;stu_gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stuGender&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;stu_age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-8-cacheæ ‡ç­¾"><a href="#6-8-cacheæ ‡ç­¾" class="headerlink" title="6.8 cacheæ ‡ç­¾"></a>6.8 cacheæ ‡ç­¾</h2><blockquote>
<p>è®¾ç½®å½“å‰DAOè¿›è¡Œæ•°æ®åº“æ“ä½œæ—¶çš„ç¼“å­˜å±æ€§è®¾ç½®</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">size</span>=<span class="string">&quot;&quot;</span> <span class="attr">readOnly</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-9-sqlå’Œinclude"><a href="#6-9-sqlå’Œinclude" class="headerlink" title="6.9 sqlå’Œinclude"></a>6.9 sqlå’Œinclude</h2><blockquote>
<p>SQLç‰‡æ®µ</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;wanglaoji&quot;</span>&gt;</span>sid , stu_num , stu_name , stu_gender , stu_age<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;listStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentMap&quot;</span>&gt;</span></span><br><span class="line">    select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;wanglaoji&quot;</span>/&gt;</span> from tb_students</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€åˆ†é¡µæ’ä»¶"><a href="#ä¸ƒã€åˆ†é¡µæ’ä»¶" class="headerlink" title="ä¸ƒã€åˆ†é¡µæ’ä»¶"></a>ä¸ƒã€åˆ†é¡µæ’ä»¶</h2><blockquote>
<p>åˆ†é¡µæ’ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹äºMyBatisæ¡†æ¶ä¹‹å¤–çš„ç¬¬ä¸‰æ–¹æ’ä»¶;</p>
</blockquote>
<h2 id="7-1-æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–"><a href="#7-1-æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–" class="headerlink" title="7.1 æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–"></a>7.1 æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–</h2><blockquote>
<p>PageHelper</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- pagehelperåˆ†é¡µæ’ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-2-é…ç½®æ’ä»¶"><a href="#7-2-é…ç½®æ’ä»¶" class="headerlink" title="7.2 é…ç½®æ’ä»¶"></a>7.2 é…ç½®æ’ä»¶</h2><blockquote>
<p>åœ¨mybatisçš„ä¸»é…ç½®æ–‡ä»¶<code>mybatis-config.xml</code>ä¸­é€šè¿‡<code>plugins</code>æ ‡ç­¾è¿›è¡Œé…ç½®</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pluginsæ ‡ç­¾ï¼Œç”¨äºé…ç½®MyBatisæ’ä»¶ï¼ˆåˆ†é¡µæ’ä»¶ï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-3-åˆ†é¡µå®ä¾‹"><a href="#7-3-åˆ†é¡µå®ä¾‹" class="headerlink" title="7.3 åˆ†é¡µå®ä¾‹"></a>7.3 åˆ†é¡µå®ä¾‹</h2><blockquote>
<p>å¯¹å­¦ç”Ÿä¿¡æ¯è¿›è¡Œåˆ†é¡µæŸ¥è¯¢</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testListStudentsByPage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> MyBatisUtil.getMapper(StudentDAO.class); <span class="comment">//sqlSession</span></span><br><span class="line">    PageHelper.startPage(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">    List&lt;Student&gt; students = studentDAO.listStudents();</span><br><span class="line"></span><br><span class="line">    PageInfo&lt;Student&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;Student&gt;(students);</span><br><span class="line">    <span class="comment">//pageInfoä¸­å°±åŒ…å«äº†æ•°æ®åŠåˆ†é¡µä¿¡æ¯</span></span><br><span class="line">    List&lt;Student&gt; list = pageInfo.getList();</span><br><span class="line">    <span class="keyword">for</span> (Student student : list) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¸¦æ¡ä»¶åˆ†é¡µ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testListStudentsByPage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> MyBatisUtil.getMapper(StudentDAO.class);</span><br><span class="line">    PageHelper.startPage(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">    <span class="comment">//List&lt;Student&gt; students = studentDAO.listStudents();</span></span><br><span class="line">    List&lt;Student&gt; list = studentDAO.listStudentsByGender(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    PageInfo&lt;Student&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;Student&gt;(list);</span><br><span class="line">    <span class="comment">//pageInfoä¸­å°±åŒ…å«äº†æ•°æ®åŠåˆ†é¡µä¿¡æ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€å…³è”æ˜ å°„"><a href="#å…«ã€å…³è”æ˜ å°„" class="headerlink" title="å…«ã€å…³è”æ˜ å°„"></a>å…«ã€å…³è”æ˜ å°„</h2><h4 id="8-1-å®ä½“å…³ç³»"><a href="#8-1-å®ä½“å…³ç³»" class="headerlink" title="8.1  å®ä½“å…³ç³»"></a>8.1  å®ä½“å…³ç³»</h4><blockquote>
<p>å®ä½“â€”â€”æ•°æ®å®ä½“ï¼Œå®ä½“å…³ç³»æŒ‡çš„å°±æ˜¯æ•°æ®ä¸æ•°æ®ä¹‹é—´çš„å…³ç³»</p>
<p>ä¾‹å¦‚ï¼šç”¨æˆ·å’Œè§’è‰²ã€æˆ¿å±‹å’Œæ¥¼æ ‹ã€è®¢å•å’Œå•†å“</p>
</blockquote>
<p>å®ä½“å…³ç³»åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š</p>
<p><strong>ä¸€å¯¹ä¸€å…³è”</strong></p>
<p>å®ä¾‹ï¼šäººå’Œèº«ä»½è¯ã€å­¦ç”Ÿå’Œå­¦ç”Ÿè¯ã€ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œè¯¦æƒ…</p>
<p>æ•°æ®è¡¨å…³ç³»ï¼š</p>
<ul>
<li><p>ä¸»é”®å…³è”ï¼ˆç”¨æˆ·è¡¨ä¸»é”® å’Œè¯¦æƒ…ä¸»é”®ç›¸åŒæ—¶ï¼Œè¡¨ç¤ºæ˜¯åŒ¹é…çš„æ•°æ®ï¼‰</p>
<p><img src="/Mybatis%E5%AD%A6%E4%B9%A0.assets/1616550990633.png" alt="1616550990633" loading="lazy"></p>
</li>
<li><p>å”¯ä¸€å¤–é”®å…³è”</p>
<p><img src="/Mybatis%E5%AD%A6%E4%B9%A0.assets/1616551159843.png" alt="1616551159843" loading="lazy"></p>
</li>
</ul>
<p><strong>ä¸€å¯¹å¤šå…³è”</strong>ã€<strong>å¤šå¯¹ä¸€å…³è”</strong></p>
<p>å®ä¾‹ï¼š</p>
<ul>
<li>ä¸€å¯¹å¤šï¼š ç­çº§å’Œå­¦ç”Ÿ ã€ ç±»åˆ«å’Œå•†å“ã€æ¥¼æ ‹å’Œæˆ¿å±‹</li>
<li>å¤šå¯¹ä¸€ï¼šå­¦ç”Ÿå’Œç­çº§ ã€  å•†å“å’Œç±»åˆ«</li>
</ul>
<p>æ•°æ®è¡¨å…³ç³»ï¼š</p>
<ul>
<li>åœ¨å¤šçš„ä¸€ç«¯æ·»åŠ å¤–é”®å’Œä¸€çš„ä¸€æ®µè¿›è¡Œå…³è”</li>
</ul>
<p><strong>å¤šå¯¹å¤šå…³è”</strong></p>
<p>å®ä¾‹ï¼šç”¨æˆ·å’Œè§’è‰²ã€è§’è‰²å’Œæƒé™ã€æˆ¿å±‹å’Œä¸šä¸»ã€å­¦ç”Ÿå’Œç¤¾å›¢ã€è®¢å•å’Œå•†å“</p>
<p>æ•°æ®è¡¨å…³ç³»ï¼šå»ºç«‹ç¬¬ä¸‰å¼ å…³ç³»è¡¨æ·»åŠ ä¸¤ä¸ªå¤–é”®åˆ†åˆ«ä¸ä¸¤å¼ è¡¨ä¸»é”®è¿›è¡Œå…³è”</p>
<p>ç”¨æˆ·(user_id)           ç”¨æˆ·è§’è‰²è¡¨(uid,rid)      è§’è‰²(role_id)</p>
<p>8.2 åˆ›å»ºé¡¹ç›®ï¼Œéƒ¨ç½²MyBatisæ¡†æ¶</p>
<ul>
<li>åˆ›å»ºwebé¡¹ç›®ï¼ˆmavenï¼‰</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ·»åŠ webä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>éƒ¨ç½²MyBatisæ¡†æ¶</p>
<ul>
<li>æ·»åŠ ä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ·»åŠ MyBatisä¾èµ–--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å·¥å…·ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-03-29 20:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;SqlSession&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;SqlSession&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            factory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getSqlSessionFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">(<span class="type">boolean</span> isAutoCommit)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (sqlSession == <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession = factory.openSession(isAutoCommit);</span><br><span class="line">            local.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Object</span>&gt; T <span class="title function_">getMapper</span><span class="params">(Class&lt;T&gt; c)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> getSqlSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> sqlSession.getMapper(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/alipay.jpg"><img loading="lazy" src="/images/alipay.jpg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div><div style="display:inline-block"><a href="/images/wechatpay.jpg"><img loading="lazy" src="/images/wechatpay.jpg" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><span class="icon iconify" data-icon="ri:wechat-pay-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>ä¸¸äº†é¸­</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://www.kdy.icu/posts/784660176.html" title="Mybatiså­¦ä¹ ">https://www.kdy.icu/posts/784660176.html</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul><script>document.addEventListener('copy', function (event) {
  const clipboardData = event.clipboardData || window.clipboardData;
  if (!clipboardData) { return; }
  const text = window.getSelection().toString();
  if (text) {
    event.preventDefault();
    clipboardData.setData('text/plain', text + '\n\næœ¬æ–‡ä½œè€…ï¼šä¸¸äº†é¸­\næœ¬æ–‡é“¾æ¥ï¼šhttps://www.kdy.icu/posts/784660176.html\nç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ CC BY-NC-SA 4.0 è®¸å¯åè®®ã€‚');
  }
});</script></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/2497860528.html" rel="prev" title="åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/2710596653.html" rel="next" title="JDBCå­¦ä¹ ç¬”è®°"><span class="post-nav-text">JDBCå­¦ä¹ ç¬”è®°</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>æœ‰æ²¡æœ‰ä»€ä¹ˆè¦å’Œæˆ‘è¯´çš„å‘¢ï¼Ÿ</span><br></div><div id="tcomment"></div><script type="module">import { getScript } from '/js/utils.js'

getScript("https://fastly.jsdelivr.net/npm/twikoo@latest/dist/twikoo.all.min.js", () => {
  const twikooConfig = {"enable":true,"envId":"https://my-twikoo-omega.vercel.app/"}
  twikooConfig.el = '#tcomment'
  twikoo.init(twikooConfig)
}, window.twikoo);</script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> ä¸¸äº†é¸­</span></div><div class="live-time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(*â•¹â–½â•¹*)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2021-01-03T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} å¤© ${passHour} å°æ—¶ ${passMinute} åˆ† ${passSecond} ç§’`;
}
blog_live_time();
</script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="æƒ³è¦æœäº›ä»€ä¹ˆï¼Ÿ" value=""></div><div class="search-result-container"></div></div><div class="aplayer no-destroy" id="aplayer" data-id="308168565" data-server="netease" data-type="playlist" data-fixed="true" data-theme="#0078E7" data-loop="all" data-order="list" data-preload="auto" data-volume="0.7" data-mutex data-lrctype="0" data-listmaxheight="340px" data-storagename="metingjs"></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>