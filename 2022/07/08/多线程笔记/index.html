<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="ä¸¸äº†é¸­"><meta name="copyright" content="ä¸¸äº†é¸­"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>å¤šçº¿ç¨‹ç¬”è®° | ä¸¸äº†é¸­çš„åšå®¢</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/images/32x32.ico"><link rel="mask-icon" href="/images/32x32.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"cyh245689173.github.io","root":"/","title":"ä¸¸äº†é¸­çš„åšå®¢","version":"1.10.4","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æƒ³è¦æœäº›ä»€ä¹ˆï¼Ÿ","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"localsearch":{"enable":"auto","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":["32, 242, 242"]},"vendors":{"darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="1.çº¿ç¨‹ç›¸å…³æ¦‚å¿µ ç¨‹åºï¼šæ˜¯ä¸ºäº†å®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚  è¿›ç¨‹ï¼š   è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–è€…è¯´æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨QQï¼Œå°±å¯åŠ¨äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ç©ºé—´ã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼Œæœ‰äº§ç”Ÿã€å­˜åœ¨ã€æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚   çº¿ç¨‹ï¼š   æ¦‚å¿µï¼š     çº¿ç¨‹æ˜¯ç”±è¿›ç¨‹åˆ›å»ºå‡ºæ¥çš„ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚è¿…é›·åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒQQæ‰“å¼€å¤šä¸ªèŠå¤©">
<meta property="og:type" content="article">
<meta property="og:title" content="å¤šçº¿ç¨‹ç¬”è®°">
<meta property="og:url" content="https://cyh245689173.github.io/2022/07/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="ä¸¸äº†é¸­çš„åšå®¢">
<meta property="og:description" content="1.çº¿ç¨‹ç›¸å…³æ¦‚å¿µ ç¨‹åºï¼šæ˜¯ä¸ºäº†å®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚  è¿›ç¨‹ï¼š   è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–è€…è¯´æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨QQï¼Œå°±å¯åŠ¨äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ç©ºé—´ã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼Œæœ‰äº§ç”Ÿã€å­˜åœ¨ã€æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚   çº¿ç¨‹ï¼š   æ¦‚å¿µï¼š     çº¿ç¨‹æ˜¯ç”±è¿›ç¨‹åˆ›å»ºå‡ºæ¥çš„ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚è¿…é›·åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒQQæ‰“å¼€å¤šä¸ªèŠå¤©">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/v2-37db4576bf6cf193c716ec5f4acb8dba_720w.jpg">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709081348581.png">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709084024884.png">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709084122133.png">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709095517528.png">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709104944597.png">
<meta property="article:published_time" content="2022-07-08T09:30:59.000Z">
<meta property="article:modified_time" content="2022-07-09T03:05:51.587Z">
<meta property="article:author" content="ä¸¸äº†é¸­">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/v2-37db4576bf6cf193c716ec5f4acb8dba_720w.jpg"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ä¸¸äº†é¸­"><img width="96" loading="lazy" src="/images/kedaya.jpg" alt="ä¸¸äº†é¸­"><span class="site-author-status" title="å†å°çš„åŠªåŠ›ä¹˜ä»¥365éƒ½å¾ˆæ˜æ˜¾">ğŸ˜</span></a><div class="site-author-name"><a href="/about/">ä¸¸äº†é¸­</a></div><span class="site-name">ä¸¸äº†é¸­çš„åšå®¢</span><sub class="site-subtitle">è®°å½•å­¦ä¹ ç”Ÿæ´»çš„ç‚¹ç‚¹æ»´æ»´</sub><div class="site-description">ä¿¡æ‰‹æ‹ˆæ¥çš„ä»å®¹ï¼Œéƒ½æ˜¯åšç§¯è–„å‘çš„æ²‰æ·€ã€‚</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">126</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">8</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://www.kdy.icu/" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/cyh245689173" title="GayHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=1696797616" title="ç½‘æŠ‘äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/248628386" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><span class="icon iconify" data-icon="ri:bilibili-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220729090533.jpg" title="åŠ æˆ‘å¾®ä¿¡" target="_blank" style="color:#1AAD19"><span class="icon iconify" data-icon="ri:wechat-2-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="è½»æ¾ä¸€åˆ»" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E7%BA%BF%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-text">1.çº¿ç¨‹ç›¸å…³æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2.çº¿ç¨‹åŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">2.1 åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F1-%E7%BB%A7%E6%89%BFThread%E7%B1%BB"><span class="toc-text">2.2 çº¿ç¨‹åˆ›å»ºæ–¹å¼1-ç»§æ‰¿Threadç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F2-%E5%AE%9E%E7%8E%B0Runnable%E6%8E%A5%E5%8F%A3"><span class="toc-text">2.3 çº¿ç¨‹åˆ›å»ºæ–¹å¼2-å®ç°Runnableæ¥å£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%BB%A7%E6%89%BFThread%E7%B1%BB%E5%92%8C%E5%AE%9E%E7%8E%B0Runnable%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">2.4 ç»§æ‰¿Threadç±»å’Œå®ç°Runnableçš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5%E6%A1%88%E4%BE%8B%EF%BC%9A"><span class="toc-text">2.5æ¡ˆä¾‹ï¼š</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E7%BA%BF%E7%A8%8B%E7%BB%88%E6%AD%A2"><span class="toc-text">3.çº¿ç¨‹ç»ˆæ­¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">3.1 åŸºæœ¬è¯´æ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%A1%88%E4%BE%8B%EF%BC%9A"><span class="toc-text">3.2 æ¡ˆä¾‹ï¼š</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E7%BA%BF%E7%A8%8B%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">4.çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E7%AC%AC%E4%B8%80%E7%BB%84"><span class="toc-text">4.1 å¸¸ç”¨æ–¹æ³•ç¬¬ä¸€ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82"><span class="toc-text">4.2 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E7%AC%AC%E4%BA%8C%E7%BB%84"><span class="toc-text">4.3 å¸¸ç”¨æ–¹æ³•ç¬¬äºŒç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B"><span class="toc-text">4.4å®ˆæŠ¤çº¿ç¨‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">5.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-JDK-%E4%B8%AD%E7%94%A8-Thread-State-%E6%9E%9A%E4%B8%BE%E8%A1%A8%E7%A4%BA%E4%BA%86%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%87%A0%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="toc-text">5.1 JDK ä¸­ç”¨ Thread.State æšä¸¾è¡¨ç¤ºäº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E5%9B%BE"><span class="toc-text">5.2 çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E6%A1%88%E4%BE%8B"><span class="toc-text">5.3 æ¡ˆä¾‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-text">6. çº¿ç¨‹åŒæ­¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-Synchronized"><span class="toc-text">6.1 Synchronized</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6"><span class="toc-text">çº¿ç¨‹åŒæ­¥æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E5%85%B7%E4%BD%93%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95Synchronized"><span class="toc-text">çº¿ç¨‹åŒæ­¥å…·ä½“çš„å®ç°æ–¹æ³•Synchronized</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-text">åŒæ­¥åŸç†åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E4%BA%92%E6%96%A5%E9%94%81"><span class="toc-text">6.2 äº’æ–¥é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-text">åŸºæœ¬ä»‹ç»ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%EF%BC%9A"><span class="toc-text">æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81"><span class="toc-text">6.3 çº¿ç¨‹æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A"><span class="toc-text">æ¡ˆä¾‹ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E9%87%8A%E6%94%BE%E9%94%81"><span class="toc-text">6.4 é‡Šæ”¾é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%9A%E9%87%8A%E6%94%BE%E9%94%81%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">ä¼šé‡Šæ”¾é”çš„æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E4%BC%9A%E9%87%8A%E6%94%BE%E9%94%81%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://cyh245689173.github.io/2022/07/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ä¸¸äº†é¸­"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ä¸¸äº†é¸­çš„åšå®¢"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">å¤šçº¿ç¨‹ç¬”è®°</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <span class="post-meta-icon-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-07-08 17:30:59" itemprop="dateCreated datePublished" datetime="2022-07-08T17:30:59+08:00">2022-07-08</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <span class="post-meta-icon-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-07-09 11:05:51" itemprop="dateModified" datetime="2022-07-09T11:05:51+08:00">2022-07-09</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="æœ¬æ–‡å­—æ•°">4.4k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="é˜…è¯»æ—¶é•¿">19m</span></span></span><span class="leancloud_visitors" id="/2022/07/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AC%94%E8%AE%B0/" data-flag-title="å¤šçº¿ç¨‹ç¬”è®°"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ¬¡æ•°"><span class="icon iconify" data-icon="ri:eye-line"></span> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%90%8E%E7%AB%AF/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">åç«¯</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="1-çº¿ç¨‹ç›¸å…³æ¦‚å¿µ"><a href="#1-çº¿ç¨‹ç›¸å…³æ¦‚å¿µ" class="headerlink" title="1.çº¿ç¨‹ç›¸å…³æ¦‚å¿µ"></a>1.çº¿ç¨‹ç›¸å…³æ¦‚å¿µ</h1><ul>
<li><p>ç¨‹åºï¼šæ˜¯ä¸ºäº†å®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚</p>
</li>
<li><p>è¿›ç¨‹ï¼š</p>
</li>
<li><ul>
<li>è¿›ç¨‹æ˜¯<strong>ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹</strong>ï¼Œæˆ–è€…è¯´æ˜¯<strong>æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºï¼Œ</strong>æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨QQï¼Œå°±å¯åŠ¨äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ç©ºé—´ã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼Œæœ‰äº§ç”Ÿã€å­˜åœ¨ã€æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚</li>
</ul>
</li>
<li><p>çº¿ç¨‹ï¼š</p>
</li>
<li><ul>
<li><strong>æ¦‚å¿µï¼š</strong></li>
</ul>
</li>
<li><ul>
<li><ul>
<li>çº¿ç¨‹æ˜¯ç”±è¿›ç¨‹åˆ›å»ºå‡ºæ¥çš„ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“</li>
<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚è¿…é›·åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒQQæ‰“å¼€å¤šä¸ªèŠå¤©çª—å£ï¼Œå¯å°†è¿™äº›çœ‹ä¸ºè¿›ç¨‹é‡Œçš„çº¿ç¨‹</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><strong>å•çº¿ç¨‹ï¼š</strong>åŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹</li>
<li><strong>å¤šçº¿ç¨‹ï¼š</strong>åŒä¸€æ—¶åˆ»ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹</li>
<li><strong>å¹¶å‘ï¼š</strong>åŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œï¼Œé€ æˆä¸€ç§â€œè²Œä¼¼åŒæ—¶è¿›è¡Œâ€çš„é”™è§‰ï¼Œå•æ ¸cpuå®ç°çš„å¤šä»»åŠ¡å°±æ˜¯å¹¶å‘ï¼Œå°±åƒäººä¸€å¿ƒå¤šç”¨åšå¥½å‡ ä»¶äº‹ï¼Œå°±æ˜¯å¹¶å‘ã€‚</li>
<li><strong>å¹¶è¡Œï¼š</strong>åŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡åŒæ—¶è¿›è¡Œï¼Œåªæœ‰å¤šæ ¸CPUæ‰å¯ä»¥å®ç°å¹¶è¡Œï¼Œæ­£åœ¨å¹¶è¡Œä¸­çš„CPUä¹Ÿå¯ä»¥å•ç‹¬å®ç°å¹¶å‘ï¼Œä¸¤è€…å¯åŒæ—¶å­˜åœ¨ã€‚</li>
</ul>
</li>
</ul>
<h1 id="2-çº¿ç¨‹åŸºæœ¬ä½¿ç”¨"><a href="#2-çº¿ç¨‹åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.çº¿ç¨‹åŸºæœ¬ä½¿ç”¨"></a>2.çº¿ç¨‹åŸºæœ¬ä½¿ç”¨</h1><h2 id="2-1-åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼"><a href="#2-1-åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="2.1 åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼"></a>2.1 åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼</h2><p>åœ¨Javaä¸­çº¿ç¨‹çš„ä½¿ç”¨æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li>ç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•</li>
<li>å®ç°Runnableæ¥å£ï¼Œé‡å†™runæ–¹æ³•</li>
</ol>
<h2 id="2-2-çº¿ç¨‹åˆ›å»ºæ–¹å¼1-ç»§æ‰¿Threadç±»"><a href="#2-2-çº¿ç¨‹åˆ›å»ºæ–¹å¼1-ç»§æ‰¿Threadç±»" class="headerlink" title="2.2 çº¿ç¨‹åˆ›å»ºæ–¹å¼1-ç»§æ‰¿Threadç±»"></a>2.2 çº¿ç¨‹åˆ›å»ºæ–¹å¼1-ç»§æ‰¿Threadç±»</h2><p><strong>æ¡ˆä¾‹ï¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹æ¯éš”ä¸€ç§’ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºâ€œå–µå–µï¼Œæˆ‘æ˜¯å°çŒ«å’ªâ€ï¼Œå½“è¾“å‡º80æ¬¡æ—¶ç»“æŸè¯¥çº¿ç¨‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Cat</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        cat.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;å–µå–µï¼Œæˆ‘æ˜¯å°çŒ«å’ª&quot;</span> + (++count));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">80</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>æ³¨æ„ï¼š</code>Java ä¸­å®ç°çœŸæ­£çš„å¤šçº¿ç¨‹æ˜¯ start ä¸­çš„ start0() æ–¹æ³•ï¼Œrun() æ–¹æ³•åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ã€‚start0() æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œæ˜¯ JVM è°ƒç”¨, åº•å±‚æ˜¯ç”¨ c&#x2F;c++å®ç°çš„ï¼ŒçœŸæ­£å®ç°å¤šçº¿ç¨‹çš„æ•ˆæœï¼Œ æ˜¯ start0()ï¼Œè€Œä¸æ˜¯ runã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/v2-37db4576bf6cf193c716ec5f4acb8dba_720w.jpg" alt="img" loading="lazy"></p>
<h2 id="2-3-çº¿ç¨‹åˆ›å»ºæ–¹å¼2-å®ç°Runnableæ¥å£"><a href="#2-3-çº¿ç¨‹åˆ›å»ºæ–¹å¼2-å®ç°Runnableæ¥å£" class="headerlink" title="2.3 çº¿ç¨‹åˆ›å»ºæ–¹å¼2-å®ç°Runnableæ¥å£"></a>2.3 çº¿ç¨‹åˆ›å»ºæ–¹å¼2-å®ç°Runnableæ¥å£</h2><ol>
<li>Javaæ˜¯å•ç»§æ‰¿ï¼Œæ‰€ä»¥åœ¨æŸäº›æƒ…å†µä¸‹ä¸€ä¸ªç±»å¯èƒ½å·²ç»ç»§æ‰¿äº†äº†æŸä¸ªçˆ¶ç±»ï¼Œè¿™æ—¶å°±æ²¡åŠæ³•å†ç”¨Threadç±»æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ã€‚</li>
<li>æ‰€ä»¥Javaè®¾è®¡è€…æä¾›äº†å¦ä¸€ä¸ªæ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹ï¼Œå°±æ˜¯å®ç°Runnableæ¥å£æ¥åˆ›å»ºçº¿ç¨‹ã€‚</li>
</ol>
<p><strong>æ¡ˆä¾‹ï¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹æ¯éš”ä¸€ç§’ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºâ€œå°ç‹—æ±ªæ±ªå«:æ—ºæ—ºæ—º~â€ï¼Œå½“è¾“å‡º10æ¬¡æ—¶ç»“æŸè¯¥çº¿ç¨‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡å®ç°Runnableæ¥å£æ¥å¼€å‘çº¿ç¨‹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-08 14:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºäº†Threadå¯¹è±¡ï¼ŒæŠŠdogå¯¹è±¡æ”¾å…¥Thread</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(dog);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;<span class="comment">//æ™®é€šæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å°ç‹—æ±ªæ±ªå«:æ—ºæ—ºæ—º~&quot;</span> + (++count) + Thread.currentThread().getName());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">10</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-ç»§æ‰¿Threadç±»å’Œå®ç°Runnableçš„åŒºåˆ«"><a href="#2-4-ç»§æ‰¿Threadç±»å’Œå®ç°Runnableçš„åŒºåˆ«" class="headerlink" title="2.4 ç»§æ‰¿Threadç±»å’Œå®ç°Runnableçš„åŒºåˆ«"></a>2.4 ç»§æ‰¿Threadç±»å’Œå®ç°Runnableçš„åŒºåˆ«</h2><ol>
<li>ä»Javaçš„è®¾è®¡ä¸Šæ¥çœ‹ï¼Œé€šè¿‡ç»§æ‰¿Threadç±»æˆ–è€…å®ç°Runnableæ¥å£æ¥åˆ›å»ºçº¿ç¨‹æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œå¹¶ä¸”Threadç±»æœ¬èº«å°±å®ç°äº†Runnableæ¥å£ã€‚</li>
<li>å®ç°Runnableæ¥å£çš„æ–¹å¼æ›´é€‚åˆå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼Œå¹¶ä¸”é¿å…äº†å•ç»§æ‰¿çš„é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨Runnableã€‚</li>
</ol>
<h2 id="2-5æ¡ˆä¾‹ï¼š"><a href="#2-5æ¡ˆä¾‹ï¼š" class="headerlink" title="2.5æ¡ˆä¾‹ï¼š"></a>2.5æ¡ˆä¾‹ï¼š</h2><p><strong>ç¼–è¾‘æ¨¡æ‹Ÿä¸‰ä¸ªçª—å£å”®ç¥¨100å¼ åˆ†åˆ«ä½¿ç”¨ç»§æ‰¿Threadç±»å’Œå®ç°Runnableæ¥å£æ¥å®ç°ï¼Œå¹¶åˆ†ææœ‰ä»€ä¹ˆé—®é¢˜ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.ysu.ticket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-08 15:37</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ¨¡æ‹Ÿä¸‰ä¸ªçª—å£åŒæ—¶å”®ç¥¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        SellTicket01 sellTicket01 = new SellTicket01();</span></span><br><span class="line"><span class="comment">//        SellTicket01 sellTicket02 = new SellTicket01();</span></span><br><span class="line"><span class="comment">//        SellTicket01 sellTicket03 = new SellTicket01();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        sellTicket01.start();</span></span><br><span class="line"><span class="comment">//        sellTicket02.start();</span></span><br><span class="line"><span class="comment">//        sellTicket03.start();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">SellTicket02</span> <span class="variable">sellTicket02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket02</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread01</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket02);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket02);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread03</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket02);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        thread01.start();</span><br><span class="line">        thread02.start();</span><br><span class="line">        thread03.start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SellTicket01</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="comment">//è®©å¤šä¸ªçº¿ç¨‹å…±äº«Num</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticketNum</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å”®ç¥¨ç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä¼‘çœ 50ms</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;çª—å£:&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å”®å‡ºä¸€å¼ ç¥¨&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;å‰©ä½™ç¥¨æ•°:&quot;</span> + (ticketNum--));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SellTicket02</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//è®©å¤šä¸ªçº¿ç¨‹å…±äº«Num</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">ticketNum</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å”®ç¥¨ç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä¼‘çœ 50ms</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;çª—å£:&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å”®å‡ºä¸€å¼ ç¥¨&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;å‰©ä½™ç¥¨æ•°:&quot;</span> + (ticketNum--));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-çº¿ç¨‹ç»ˆæ­¢"><a href="#3-çº¿ç¨‹ç»ˆæ­¢" class="headerlink" title="3.çº¿ç¨‹ç»ˆæ­¢"></a>3.çº¿ç¨‹ç»ˆæ­¢</h1><h2 id="3-1-åŸºæœ¬è¯´æ˜"><a href="#3-1-åŸºæœ¬è¯´æ˜" class="headerlink" title="3.1 åŸºæœ¬è¯´æ˜"></a>3.1 åŸºæœ¬è¯´æ˜</h2><ol>
<li>å½“çº¿ç¨‹å®Œæˆä»»åŠ¡åï¼Œä¼šè‡ªåŠ¨é€€å‡ºã€‚</li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡<strong>ä½¿ç”¨å˜é‡</strong>çš„æ–¹å¼æ¥æ§åˆ¶runæ–¹æ³•é€€å‡ºçš„æ–¹å¼æ¥åœæ­¢çº¿ç¨‹ï¼Œå³<strong>é€šçŸ¥æ–¹å¼</strong>ã€‚</li>
</ol>
<h2 id="3-2-æ¡ˆä¾‹ï¼š"><a href="#3-2-æ¡ˆä¾‹ï¼š" class="headerlink" title="3.2 æ¡ˆä¾‹ï¼š"></a>3.2 æ¡ˆä¾‹ï¼š</h2><p><strong>å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹Tï¼Œåœ¨mainçº¿ç¨‹ä¸­åœæ­¢Tçº¿ç¨‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.ysu.exit_;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-08 15:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadExit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¸Œæœ›mainçº¿ç¨‹å»æ§åˆ¶t1çº¿ç¨‹çš„ç»ˆæ­¢ï¼Œå¿…é¡»å¯ä»¥ä¿®æ”¹loop</span></span><br><span class="line">        <span class="comment">//è®©t1 é€€å‡ºrunæ–¹æ³•ï¼Œä»è€Œç»ˆæ­¢t1çº¿ç¨‹  - &gt; é€šçŸ¥æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ä¼‘çœ 10s&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">10</span> * <span class="number">1000</span>);</span><br><span class="line">        t1.setLoop(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®ä¸€ä¸ªæ§åˆ¶å˜é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸ºloopå˜é‡æ·»åŠ setæ–¹æ³•æ¥ä¿è¯ä¸»çº¿ç¨‹å¯ä»¥å¯¹è¯¥å˜é‡è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLoop</span><span class="params">(<span class="type">boolean</span> loop)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loop = loop;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (loop) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹Tè¿è¡Œä¸­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span> + (++count));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-çº¿ç¨‹å¸¸ç”¨æ–¹æ³•"><a href="#4-çº¿ç¨‹å¸¸ç”¨æ–¹æ³•" class="headerlink" title="4.çº¿ç¨‹å¸¸ç”¨æ–¹æ³•"></a>4.çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</h1><h2 id="4-1-å¸¸ç”¨æ–¹æ³•ç¬¬ä¸€ç»„"><a href="#4-1-å¸¸ç”¨æ–¹æ³•ç¬¬ä¸€ç»„" class="headerlink" title="4.1 å¸¸ç”¨æ–¹æ³•ç¬¬ä¸€ç»„"></a>4.1 å¸¸ç”¨æ–¹æ³•ç¬¬ä¸€ç»„</h2><ol>
<li>setName &#x2F;&#x2F;è®¾ç½®çº¿ç¨‹åç§°ï¼Œä½¿ä¹‹ä¸å‚æ•°nameç›¸åŒ</li>
<li>getName &#x2F;&#x2F;è¿”å›è¯¥çº¿ç¨‹çš„åç§°</li>
<li>start &#x2F;&#x2F;ä½¿è¯¥çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJavaè™šæ‹Ÿæœºåº•å±‚è°ƒç”¨è¯¥çº¿ç¨‹çš„start0æ–¹æ³•</li>
<li>run &#x2F;&#x2F;è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„runæ–¹æ³•</li>
<li>setPriority &#x2F;&#x2F;æ›´æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§</li>
<li>getPriority &#x2F;&#x2F;è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§</li>
<li>sleep &#x2F;&#x2F;åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ (æš‚åœæ‰§è¡Œ)</li>
</ol>
<h2 id="4-2-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#4-2-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="4.2 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>4.2 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2><ol>
<li>startæ–¹æ³•çš„åº•å±‚æ‰ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹è°ƒç”¨runï¼Œè€Œrunæ–¹æ³•åªæ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šå¯åŠ¨æ–°çº¿ç¨‹</li>
<li>çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´</li>
<li>interruptï¼Œä¸­æ–­çº¿ç¨‹ï¼Œä½†æ˜¯æ²¡æœ‰ç»“æŸçº¿ç¨‹ï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨äºä¸­æ–­æ­£åœ¨ä¼‘çœ çš„çº¿ç¨‹</li>
<li>sleepï¼šçº¿ç¨‹çš„é™æ€æ–¹æ³•ï¼Œä½¿å½“å‰çº¿ç¨‹ä¼‘çœ </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadMethod1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ThreadDemo1</span> <span class="variable">td1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadDemo1</span>();</span><br><span class="line">        <span class="comment">//ç»™çº¿ç¨‹èµ·åå­—</span></span><br><span class="line">        td1.setName(<span class="string">&quot;åˆ˜äº¦è²&quot;</span>);</span><br><span class="line">        <span class="comment">//ç»™çº¿ç¨‹è®¾ç½®ä¼˜å…ˆçº§</span></span><br><span class="line">        td1.setPriority(Thread.MIN_PRIORITY);</span><br><span class="line">        <span class="comment">//å¯åŠ¨å­çº¿ç¨‹</span></span><br><span class="line">        td1.start();</span><br><span class="line">        <span class="comment">//æµ‹è¯•ä¼˜å…ˆçº§</span></span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤ä¼˜å…ˆçº§ï¼š&quot;</span> + Thread.currentThread().getPriority());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//interruptæµ‹è¯•</span></span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        <span class="comment">//ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œå°±ä¼šä¸­æ–­td1çº¿ç¨‹çš„ä¼‘çœ </span></span><br><span class="line">        td1.interrupt();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadDemo1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//Thread.currentThread().getName() è·å–å½“å‰çº¿ç¨‹çš„åç§°</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æ­£åœ¨åƒåŒ…å­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æ­£åœ¨ä¼‘çœ &quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">20000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">//å½“è¯¥çº¿ç¨‹æŒ‡å®šåˆ°ä¸€ä¸ªinterruptæ–¹æ³•æ—¶ï¼Œå°±ä¼šcatchä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">            <span class="comment">//InterruptedException æ˜¯æŒ‡æ•è·åˆ°ä¸€ä¸ªä¸­æ–­å¼‚å¸¸</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;è¢«ä¸­æ–­äº†&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-å¸¸ç”¨æ–¹æ³•ç¬¬äºŒç»„"><a href="#4-3-å¸¸ç”¨æ–¹æ³•ç¬¬äºŒç»„" class="headerlink" title="4.3 å¸¸ç”¨æ–¹æ³•ç¬¬äºŒç»„"></a>4.3 å¸¸ç”¨æ–¹æ³•ç¬¬äºŒç»„</h2><ol>
<li><strong>yield</strong>ï¼šçº¿ç¨‹ç¤¼è®©ã€‚è®©å‡ºCPUï¼Œè®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œï¼Œä½†ç¤¼è®©çš„æ—¶é—´ä¸ç¡®å®šï¼Œæ‰€ä»¥ä¹Ÿä¸ä¸€å®šç¤¼è®©æˆåŠŸã€‚<strong>yieldæ˜¯å°†çº¿ç¨‹ä»è¿è¡Œæ€ï¼Œè½¬ä¸ºå°±ç»ªæ€ï¼Œç„¶åä¸å…¶ä»–çº¿ç¨‹é‡æ–°ç«äº‰ã€‚</strong></li>
<li><strong>joinï¼š</strong>çº¿ç¨‹æ’é˜Ÿã€‚æ’é˜Ÿçš„çº¿ç¨‹ä¸€æ—¦æ’é˜ŸæˆåŠŸï¼Œåˆ™<strong>ä¼šå…ˆæ‰§è¡Œå®Œæ’å…¥çº¿ç¨‹çš„æ‰€æœ‰ä»»åŠ¡ã€‚</strong></li>
</ol>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709081348581.png" alt="image-20220709081348581" loading="lazy"></p>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.ysu.method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-09 8:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadMethod02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">T2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T2</span>();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;=<span class="number">20</span> ; i++) &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ åƒäº†&quot;</span> + i+ <span class="string">&quot;ä¸ªæ±‰å ¡&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">5</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹è®©å­çº¿ç¨‹å…ˆåƒ&quot;</span>);</span><br><span class="line">                <span class="comment">//joinçº¿ç¨‹æ’é˜Ÿ</span></span><br><span class="line">                <span class="comment">//ç›¸å½“äºè®©t2çº¿ç¨‹å…ˆæ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"><span class="comment">//                t2.join();</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">//yieldçº¿ç¨‹ç¤¼è®©</span></span><br><span class="line">                t2.yield();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;å­çº¿ç¨‹ åƒäº†&quot;</span> + i+ <span class="string">&quot;ä¸ªæ±‰å ¡&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-4å®ˆæŠ¤çº¿ç¨‹"><a href="#4-4å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="4.4å®ˆæŠ¤çº¿ç¨‹"></a>4.4å®ˆæŠ¤çº¿ç¨‹</h2><p>ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹</p>
<ol>
<li>ç”¨æˆ·çº¿ç¨‹ï¼šä¹Ÿå«å·¥ä½œçº¿ç¨‹ï¼Œå½“çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆ–é€šçŸ¥æ–¹å¼ç»“æŸã€‚</li>
<li>å®ˆæŠ¤çº¿ç¨‹ï¼šä¸€èˆ¬è§†ä¸ºå·¥ä½œçº¿ç¨‹æœåŠ¡çš„ï¼Œå½“æ‰€æœ‰å·¥ä½œçº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸ</li>
<li>å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼šåƒåœ¾å›æ”¶æœºåˆ¶</li>
</ol>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.ysu.method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-09 8:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadMethod03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">MyDaemonThread</span> <span class="variable">myDaemonThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyDaemonThread</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœæˆ‘ä»¬å¸Œæœ›å½“ä¸»çº¿ç¨‹ç»“æŸï¼Œå­çº¿ç¨‹å¯ä»¥è‡ªåŠ¨ç»“æŸ</span></span><br><span class="line">        <span class="comment">//åªéœ€å°†å­çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹å³å¯</span></span><br><span class="line">        myDaemonThread.setDaemon(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        myDaemonThread.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è€æ¿åœ¨åŠå…¬å®¤æ‘¸é±¼&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;è€æ¿å‡ºæ¥è§†å¯Ÿï¼Œæˆ‘ç»“æŸæ‘¸é±¼ï¼Œè®¤çœŸå·¥ä½œï¼ˆå‡è£…ï¼‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDaemonThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘åœ¨æ„‰å¿«åœ°æ‘¸é±¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#5-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="5.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>5.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="5-1-JDK-ä¸­ç”¨-Thread-State-æšä¸¾è¡¨ç¤ºäº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€"><a href="#5-1-JDK-ä¸­ç”¨-Thread-State-æšä¸¾è¡¨ç¤ºäº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€" class="headerlink" title="5.1 JDK ä¸­ç”¨ Thread.State æšä¸¾è¡¨ç¤ºäº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€"></a>5.1 JDK ä¸­ç”¨ Thread.State æšä¸¾è¡¨ç¤ºäº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€</h2><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709084024884.png" alt="image-20220709084024884" loading="lazy"></p>
<h2 id="5-2-çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾"><a href="#5-2-çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾" class="headerlink" title="5.2 çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾"></a>5.2 çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾</h2><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709084122133.png" loading="lazy"></p>
<p>RunnableçŠ¶æ€åªæ˜¯ä»£è¡¨å¯ä»¥è¿è¡Œäº†ï¼Œä½†æ˜¯å¦è¿è¡Œå–å†³äºçº¿ç¨‹è°ƒåº¦å™¨ã€‚</p>
<h2 id="5-3-æ¡ˆä¾‹"><a href="#5-3-æ¡ˆä¾‹" class="headerlink" title="5.3 æ¡ˆä¾‹"></a>5.3 æ¡ˆä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.ysu.state_;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-09 9:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadState_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">        System.out.println(t.getName() + <span class="string">&quot;çŠ¶æ€ä¸ºï¼š&quot;</span> + t.getState());</span><br><span class="line">        t.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åªè¦çº¿ç¨‹çŠ¶æ€ä¸æ˜¯ç»ˆæ­¢çŠ¶æ€ï¼Œå°±æ‰“å°çº¿ç¨‹tçš„çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">while</span> (Thread.State.TERMINATED != t.getState()) &#123;</span><br><span class="line">            System.out.println(t.getName() + <span class="string">&quot;çŠ¶æ€ä¸ºï¼š&quot;</span> + t.getState());</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(t.getName() + <span class="string">&quot;çŠ¶æ€ä¸ºï¼š&quot;</span> + t.getState());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Hello&quot;</span> + i);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="6-çº¿ç¨‹åŒæ­¥"><a href="#6-çº¿ç¨‹åŒæ­¥" class="headerlink" title="6. çº¿ç¨‹åŒæ­¥"></a>6. çº¿ç¨‹åŒæ­¥</h1><h2 id="6-1-Synchronized"><a href="#6-1-Synchronized" class="headerlink" title="6.1 Synchronized"></a>6.1 Synchronized</h2><h3 id="çº¿ç¨‹åŒæ­¥æœºåˆ¶"><a href="#çº¿ç¨‹åŒæ­¥æœºåˆ¶" class="headerlink" title="çº¿ç¨‹åŒæ­¥æœºåˆ¶"></a>çº¿ç¨‹åŒæ­¥æœºåˆ¶</h3><ol>
<li>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸€äº›æ•æ„Ÿæ•°æ®ä¸å…è®¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ­¤æ—¶å°±ä½¿ç”¨åŒæ­¥è®¿é—®æŠ€æœ¯ï¼Œä¿è¯æ•°æ®åœ¨ä»»ä½•åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</li>
<li>çº¿ç¨‹åŒæ­¥ï¼šå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸å¯ä»¥å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼ŒçŸ¥é“è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå…¶ä»–å¿åŸæ‰èƒ½å¯¹è¯¥çº¿ç¨‹åœ°å€è¿›è¡Œæ“ä½œã€‚</li>
</ol>
<h3 id="çº¿ç¨‹åŒæ­¥å…·ä½“çš„å®ç°æ–¹æ³•Synchronized"><a href="#çº¿ç¨‹åŒæ­¥å…·ä½“çš„å®ç°æ–¹æ³•Synchronized" class="headerlink" title="çº¿ç¨‹åŒæ­¥å…·ä½“çš„å®ç°æ–¹æ³•Synchronized"></a>çº¿ç¨‹åŒæ­¥å…·ä½“çš„å®ç°æ–¹æ³•Synchronized</h3><p>æ¡ˆä¾‹ï¼šå–ç¥¨å¢å¼º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.ysu.synchronized_;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> xiaochen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-07-08 15:37</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ¨¡æ‹Ÿä¸‰ä¸ªçª—å£åŒæ—¶å”®ç¥¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SellTicket03</span> <span class="variable">sellTicket02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket03</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread01</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket02);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket02);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread03</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket02);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        thread01.start();</span><br><span class="line">        thread02.start();</span><br><span class="line">        thread03.start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°æ¥å£æ–¹å¼ï¼Œä½¿ç”¨synchronizedå®ç°çº¿ç¨‹åŒæ­¥</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SellTicket03</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//è®©å¤šä¸ªçº¿ç¨‹å…±äº«ticketNum</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">ticketNum</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        sell();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">sell</span><span class="params">()</span> &#123;<span class="comment">//åŒæ­¥æ–¹æ³•ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œrunæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å”®ç¥¨ç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä¼‘çœ 50ms</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;çª—å£:&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å”®å‡ºä¸€å¼ ç¥¨&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;å‰©ä½™ç¥¨æ•°:&quot;</span> + (ticketNum--));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŒæ­¥åŸç†åˆ†æ"><a href="#åŒæ­¥åŸç†åˆ†æ" class="headerlink" title="åŒæ­¥åŸç†åˆ†æ"></a>åŒæ­¥åŸç†åˆ†æ</h3><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709095517528.png" alt="image-20220709095517528" loading="lazy"></p>
<p>ä¸‰ä¸ªçº¿ç¨‹äº‰å¤ºä¸€æŠŠé”ï¼ˆå¯¹è±¡é”ï¼‰ï¼Œè°æŠ¢åˆ°è°å°±æ‰§è¡Œrunæ–¹æ³•ä¸­çš„ä»£ç ï¼Œå…¶ä½™çº¿ç¨‹ä¼šè¢«æŒ¡åœ¨å¤–é¢ï¼Œæ‰§è¡Œå®Œæ¯•åé‡Šæ”¾é”ï¼Œç„¶åä¸‰ä¸ªçº¿ç¨‹ç»§ç»­äº‰å¤ºã€‚</p>
<h2 id="6-2-äº’æ–¥é”"><a href="#6-2-äº’æ–¥é”" class="headerlink" title="6.2 äº’æ–¥é”"></a>6.2 äº’æ–¥é”</h2><h3 id="åŸºæœ¬ä»‹ç»ï¼š"><a href="#åŸºæœ¬ä»‹ç»ï¼š" class="headerlink" title="åŸºæœ¬ä»‹ç»ï¼š"></a>åŸºæœ¬ä»‹ç»ï¼š</h3><ol>
<li>Javaè¯­è¨€ä¸­å¼•å…¥äº†å¯¹è±¡äº’æ–¥é”çš„æ¦‚å¿µï¼Œæ¥ä¿è¯å…±äº«æ•°æ®æ“ä½œçš„å®Œæ•´æ€§ã€‚</li>
<li>æ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ªå¯ä»¥è¢«ç§°ä¸ºâ€œ<strong>äº’æ–¥é”</strong>â€çš„æ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°ç”¨æ¥ä¿è¯åœ¨ä»»ä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ã€‚</li>
<li>å…³é”®å­—synchronizedæ¥ä¸å¯¹è±¡äº’æ–¥é”è”ç³»ã€‚å½“æŸä¸ªå¯¹è±¡ç”¨synchronizedä¿®é¥°æ—¶ï¼Œè¡¨åè¯¥å¯¹è±¡åœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚</li>
<li>åŒæ­¥çš„å±€é™æ€§ï¼šå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ä¼šé™ä½ï¼ˆç›¸å½“äºå¤šä¸ªè½¦æ’é˜Ÿç»è¿‡ä¸€ä¸ªæ”¶è´¹ç«™ï¼‰</li>
<li>åŒæ­¥æ–¹æ³•(éé™æ€)çš„é”å¯ä»¥æ˜¯thisï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å¯¹è±¡(è¦æ±‚æ˜¯åŒä¸€å¯¹è±¡)ã€‚</li>
<li>åŒæ­¥æ–¹æ³•(é™æ€çš„)çš„é”ä¸ºå½“å‰ç±»æœ¬èº«ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. public synchronized void sell() &#123;&#125; å°±æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œæ­¤æ—¶çš„é”åœ¨thiså¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">sell</span><span class="params">()</span> &#123;<span class="comment">//åŒæ­¥æ–¹æ³•ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œrunæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å”®ç¥¨ç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä¼‘çœ 50ms</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;çª—å£:&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å”®å‡ºä¸€å¼ ç¥¨&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;å‰©ä½™ç¥¨æ•°:&quot;</span> + (ticketNum--));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//2. ä¹Ÿå¯ä»¥åœ¨ä»£ç å—ä¸Šå†™synchronized ï¼ŒåŒæ­¥ä»£ç å—ï¼Œäº’æ–¥é”è¿˜æ˜¯åœ¨thiså¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sell</span><span class="params">()</span> &#123;<span class="comment">//åŒæ­¥æ–¹æ³•ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œrunæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å”®ç¥¨ç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä¼‘çœ 50ms</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">50</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                System.out.println(<span class="string">&quot;çª—å£:&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å”®å‡ºä¸€å¼ ç¥¨&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;å‰©ä½™ç¥¨æ•°:&quot;</span> + (ticketNum--));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. åŒæ­¥æ–¹æ³•(éé™æ€)çš„é”å¯ä»¥æ˜¯thisï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å¯¹è±¡(è¦æ±‚æ˜¯åŒä¸€å¯¹è±¡)ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sell</span><span class="params">()</span> &#123;<span class="comment">//åŒæ­¥æ–¹æ³•ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œrunæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å”®ç¥¨ç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä¼‘çœ 50ms</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">50</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                System.out.println(<span class="string">&quot;çª—å£:&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å”®å‡ºä¸€å¼ ç¥¨&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;å‰©ä½™ç¥¨æ•°:&quot;</span> + (ticketNum--));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4.åŒæ­¥æ–¹æ³•(é™æ€çš„)çš„é”ä¸ºå½“å‰ç±»æœ¬èº«ã€‚</span></span><br><span class="line">    <span class="comment">//m1çš„é”æ˜¯åŠ åœ¨SellTicket03è¿™ä¸ªç±»ä¸Šçš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">m1</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">m2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(SellTicket03.class)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;m2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š"><a href="#æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š"></a>æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š</h3><ol>
<li>å¦‚æœåŒæ­¥æ–¹æ³•æ²¡æœ‰ä½¿ç”¨staticä¿®é¥°ï¼šé»˜è®¤é”å¯¹è±¡æ˜¯this</li>
<li>å¦‚æœåŒæ­¥æ–¹æ³•ä½¿ç”¨staticè¿›è¡Œä¿®é¥°ï¼šé»˜è®¤é”å¯¹è±¡æ˜¯å½“å‰ç±».class</li>
<li>å®ç°çš„æ­¥éª¤<ol>
<li>å…ˆåˆ†æéœ€è¦è¿›è¡Œä¸Šé”çš„ä»£ç </li>
<li>é€‰æ‹©<strong>åŒæ­¥ä»£ç å—</strong>æˆ–è€…åŒæ­¥æ–¹æ³•ï¼Œå»ºè®®åŒæ­¥ä»£ç å—ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä½¿å¾—ä¸Šé”çš„ä»£ç æ›´å°‘ï¼Œæ•ˆç‡ç›¸å¯¹æ›´é«˜ä¸€äº›ã€‚</li>
<li>è¦æ±‚å¤šä¸ªçº¿ç¨‹çš„é”å¯¹è±¡ä¸ºåŒä¸€ä¸ªå³å¯ã€‚</li>
</ol>
</li>
</ol>
<h2 id="6-3-çº¿ç¨‹æ­»é”"><a href="#6-3-çº¿ç¨‹æ­»é”" class="headerlink" title="6.3 çº¿ç¨‹æ­»é”"></a>6.3 çº¿ç¨‹æ­»é”</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p>å¤šä¸ªçº¿ç¨‹éƒ½äº’ç›¸å ç”¨äº†å¯¹æ–¹çš„é”èµ„æºï¼Œä½†ä¸è‚¯ç›¸è®©ï¼Œå¯¼è‡´äº†æ­»é”ï¼Œç¼–ç¨‹æ—¶è¦é¿å…æ­»é”çš„å‘ç”Ÿã€‚</p>
<h3 id="æ¡ˆä¾‹ï¼š"><a href="#æ¡ˆä¾‹ï¼š" class="headerlink" title="æ¡ˆä¾‹ï¼š"></a>æ¡ˆä¾‹ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeadLock_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿæ­»é”ç°è±¡</span></span><br><span class="line">        <span class="type">DeadLockDemo</span> <span class="variable">A</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadLockDemo</span>(<span class="literal">true</span>);</span><br><span class="line">        A.setName(<span class="string">&quot;Açº¿ç¨‹&quot;</span>);</span><br><span class="line">        <span class="type">DeadLockDemo</span> <span class="variable">B</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadLockDemo</span>(<span class="literal">false</span>);</span><br><span class="line">        B.setName(<span class="string">&quot;Bçº¿ç¨‹&quot;</span>);</span><br><span class="line">        A.start();</span><br><span class="line">        B.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DeadLockDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">o1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();<span class="comment">// ä¿è¯å¤šçº¿ç¨‹ï¼Œå…±äº«ä¸€ä¸ªå¯¹è±¡,è¿™é‡Œä½¿ç”¨static</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">o2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="type">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DeadLockDemo</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;<span class="comment">//æ„é€ å™¨</span></span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸‹é¢ä¸šåŠ¡é€»è¾‘çš„åˆ†æ</span></span><br><span class="line">        <span class="comment">//1. å¦‚æœflag ä¸º T, çº¿ç¨‹A å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰ o1 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å– o2 å¯¹è±¡é”</span></span><br><span class="line">        <span class="comment">//2. å¦‚æœçº¿ç¨‹A å¾—ä¸åˆ° o2 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked</span></span><br><span class="line">        <span class="comment">//3. å¦‚æœflag ä¸º F, çº¿ç¨‹B å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰ o2 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å– o1 å¯¹è±¡é”</span></span><br><span class="line">        <span class="comment">//4. å¦‚æœçº¿ç¨‹B å¾—ä¸åˆ° o1 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (o1) &#123;<span class="comment">//å¯¹è±¡äº’æ–¥é”, ä¸‹é¢å°±æ˜¯åŒæ­¥ä»£ç </span></span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; è¿›å…¥1&quot;</span>);</span><br><span class="line">                <span class="keyword">synchronized</span> (o2) &#123; <span class="comment">// è¿™é‡Œè·å¾—liå¯¹è±¡çš„ç›‘è§†æƒ</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot; è¿›å…¥2&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (o2) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; è¿›å…¥3&quot;</span>);</span><br><span class="line">                <span class="keyword">synchronized</span> (o1) &#123; <span class="comment">// è¿™é‡Œè·å¾—liå¯¹è±¡çš„ç›‘è§†æƒ</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot; è¿›å…¥4&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/9286/image-20220709104944597.png" alt="image-20220709104944597" loading="lazy"></p>
<p>ä¸¤çº¿ç¨‹æ­»é”ï¼Œç¨‹åºå¡æ­»ã€‚</p>
<h2 id="6-4-é‡Šæ”¾é”"><a href="#6-4-é‡Šæ”¾é”" class="headerlink" title="6.4 é‡Šæ”¾é”"></a>6.4 é‡Šæ”¾é”</h2><h3 id="ä¼šé‡Šæ”¾é”çš„æ“ä½œ"><a href="#ä¼šé‡Šæ”¾é”çš„æ“ä½œ" class="headerlink" title="ä¼šé‡Šæ”¾é”çš„æ“ä½œ"></a>ä¼šé‡Šæ”¾é”çš„æ“ä½œ</h3><ol>
<li>å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸ<ul>
<li>æ¡ˆä¾‹ï¼šä¸Šå•æ‰€ï¼Œä¸Šå®Œå•æ‰€å‡ºæ¥</li>
</ul>
</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ°breakã€return<ul>
<li>æ¡ˆä¾‹ï¼šæ²¡æœ‰æ­£å¸¸çš„å®Œäº‹ï¼Œç»ç†å«ä»–ä¿®æ”¹bugï¼Œä¸å¾—å·²ä¸­æ–­ä¸Šå•æ‰€</li>
</ul>
</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°äº†æœªå¤„ç†çš„Erroræˆ–è€…Exceptionï¼Œå¯¼è‡´å¼‚å¸¸ç»“æŸ<ul>
<li>æ²¡æœ‰æ­£å¸¸çš„å®Œäº‹ï¼Œå‘ç°å¿˜å¸¦çº¸ï¼Œä¸å¾—å·²å‡ºæ¥</li>
</ul>
</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„wait()æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”ã€‚<ul>
<li>æ¡ˆä¾‹ï¼šæ²¡æœ‰æ­£å¸¸å®Œäº‹ï¼Œè§‰å¾—éœ€è¦é…é…¿ä¸€ä¸‹ï¼Œå…ˆå‡ºæ¥ï¼Œç­‰ä¼šå†è¿›å»</li>
</ul>
</li>
</ol>
<h3 id="ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ"><a href="#ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ" class="headerlink" title="ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ"></a>ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ</h3><ol>
<li>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨Thread.sleep()ã€Thread.yield()æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ä¼šé‡Šæ”¾é”ã€‚<ul>
<li>æ¡ˆä¾‹ï¼šä¸Šå•æ‰€ï¼Œå¤ªå›°äº†ï¼Œåé©¬æ¡¶ä¸Šç¡ä¸€ä¼š</li>
</ul>
</li>
<li>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„suspend()æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”ã€‚<ul>
<li>æç¤ºï¼šåº”è¯¥å°½é‡é¿å…suspend()å’Œresume()æ¥æ§åˆ¶çº¿ç¨‹ï¼Œæ–¹æ³•ä¸åœ¨æ¨èä½¿ç”¨</li>
</ul>
</li>
</ol>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/alipay.jpg"><img loading="lazy" src="/images/alipay.jpg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div><div style="display:inline-block"><a href="/images/wechatpay.jpg"><img loading="lazy" src="/images/wechatpay.jpg" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><span class="icon iconify" data-icon="ri:wechat-pay-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>ä¸¸äº†é¸­</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://cyh245689173.github.io/2022/07/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AC%94%E8%AE%B0/" title="å¤šçº¿ç¨‹ç¬”è®°">https://cyh245689173.github.io/2022/07/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AC%94%E8%AE%B0/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/07/11/CentOS%E7%9A%84%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85/" rel="prev" title="CentOSçš„ä¸‹è½½ä¸å®‰è£…"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">CentOSçš„ä¸‹è½½ä¸å®‰è£…</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/07/08/Freemarker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="next" title="Freemarkerå­¦ä¹ ç¬”è®°"><span class="post-nav-text">Freemarkerå­¦ä¹ ç¬”è®°</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>è¦ä¸è¦å’Œæˆ‘è¯´äº›ä»€ä¹ˆï¼Ÿ</span><br></div><div id="valine-container"></div><script type="module">import { getScript } from '/js/utils.js'
getScript("https://fastly.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"KE7GLrwmrIL3DMv4Lvy7NDwb-gzGzoHsz","appKey":"Ie0kEhvYU883vW9Mw4re3Vlg","placeholder":"æœŸå¾…æ‚¨ç»™æˆ‘æå‡ºçš„æ”¹è¿›","avatar":null,"pageSize":10,"visitor":true,"highlight":true,"recordIP":false,"enableQQ":true,"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/2022/07/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AC%94%E8%AE%B0/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> ä¸¸äº†é¸­</span></div><div class="live-time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(*â•¹â–½â•¹*)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2021-01-03T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} å¤© ${passHour} å°æ—¶ ${passMinute} åˆ† ${passSecond} ç§’`;
}
blog_live_time();
</script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="æƒ³è¦æœäº›ä»€ä¹ˆï¼Ÿ" value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>